{"version":3,"sources":["webpack:///./src/js/experiments/base.ts","webpack:///./src/js/experiments/particles/particles-basic.ts","webpack:///./src/js/experiments/particles/path-trailing/index.ts","webpack:///./src/js/experiments/particles/path-trailing/shaders/vertex.glsl","webpack:///./src/js/experiments/particles/path-trailing/shaders/fragment.glsl","webpack:///./src/js/experiments/particles/path-trailing/russia.png","webpack:///./src/js/experiments/physics/physics-worker.ts","webpack:///./src/js/experiments/shaders/patterns/index.ts","webpack:///./src/js/experiments/shaders/patterns/shaders/vertex.glsl","webpack:///./src/js/experiments/shaders/patterns/shaders/fragment.glsl","webpack:///./src/js/experiments/shaders/pixelated/index.ts","webpack:///./src/js/experiments/shaders/pixelated/shaders/vertex.glsl","webpack:///./src/js/experiments/shaders/pixelated/shaders/fragment.glsl","webpack:///./src/js/experiments/shaders/pixelated/shaders/postprocessing.glsl","webpack:///./src/js/experiments/sliders/1/index.ts","webpack:///./src/js/experiments/sliders/1/shaders/vertex.glsl","webpack:///./src/js/experiments/sliders/1/shaders/fragment.glsl","webpack:///./src/js/experiments/sliders/1/shaders/postprocessing.glsl","webpack:///./src/js/experiments/sliders/fullscreen/index.ts","webpack:///./src/js/utils/webgl.ts","webpack:///./src/js/experiments/text/text-basic.ts","webpack:///./src/js/experiments/text/shaders/vertex.glsl","webpack:///./src/js/experiments/text/shaders/fragment.glsl","webpack:///./src/js/experiments/instancing/gltf.ts","webpack:///./src/js/experiments/sliders/fullscreen/main-slider/webgl-slider.ts","webpack:///./src/js/experiments/sliders/fullscreen/main-slider/shaders/vertex.glsl","webpack:///./src/js/experiments/sliders/fullscreen/main-slider/shaders/fragment.glsl","webpack:///./src/js/polyfills.ts","webpack:///./src/js/sw.ts","webpack:///./src/js/app.ts","webpack:///./src/js/utils/index.ts","webpack:///./src/js/experiments/sliders/fullscreen/main-slider/index.ts"],"names":["baseExperiment","name","fn","canvas","document","querySelector","canvasRect","getBoundingClientRect","sizes","width","height","stats","Stats","body","appendChild","domElement","gui","dat","addFolder","onRender","update","window","addEventListener","module","hot","addDisposeHandler","destroy","createParticlesBasic","rAF","renderer","THREE","outputEncoding","setPixelRatio","Math","min","devicePixelRatio","setSize","camera","position","z","scene","particleTexture","load","PUBLIC_PATH","particlesGeometry","positions","Float32Array","particlesCount","i","random","setAttribute","sphere","color","map","size","sizeAttenuation","depthWrite","blending","add","controls","OrbitControls","enableDamping","animate","render","requestAnimationFrame","aspect","updateProjectionMatrix","cancelAnimationFrame","dispose","createParticlesPathTrailing","svg","Error","svgBBox","getBBox","style","display","svgTexture","texture","params","mapColor","particlesColor","pointsAmountFactor","maxPointsToRender","pointsToRenderFactor","particlesSpeed","opacityFactor","particleSize","max","step","opacity","pathsData","maxPoints","initScene","Array","from","querySelectorAll","path","pathLength","getTotalLength","pointsAmount","floor","points","pointAt","point","getPointAtLength","normalizedPoint","x","y","push","length","pointsToRender","currentPosition","reduce","acc","pathData","onFinishChange","particlesMaterial","uniforms","uParticleSize","value","getPixelRatio","uTime","uColor","vertexShader","fragmentShader","transparent","addColor","onChange","particles","plane","material","dummyMat4","k","j","set","attributes","array","applyMatrix4","makeScale","needsUpdate","remove","disposeMesh","createPhysicsWorker","shadowMap","enabled","type","objects","world","CANNON","gravity","defaultMaterial","defaultContactMaterial","friction","restitution","addContactMaterial","receiveShadow","floorShape","floorBody","mass","addShape","addBody","ambientLight","directionalLight","target","castShadow","boxGeometry","boxMaterial","metalness","roughness","mesh","scale","shape","createBox","clock","oldElapsedTime","elapsedTime","getElapsedTime","deltaTime","copy","createShadersPatterns","geometry","defines","PI","createShadersPixelated","sliderAladino","Aladino","density","dpr","post","fragment","postprocessingShader","pixelSize","vertex","img","carpet","image","currentSrc","resize","createSliders1","speed","speed2","cells","carpets","forEach","cell","oldProgress","slider","Flickity","accessibility","freeScroll","dragThreshold","freeScrollFriction","prevNextButtons","pageDots","observer","IntersectionObserver","entries","entry","exactCarpet","find","dom","active","isIntersecting","observe","on","progress","lerp","_isWebGLAvailable","isWebGLAvailable","createSlidersFullscreen","mainSlider","mainSliderContainer","MainSliderConstructor","MainWebglSlider","MainSlider","duration","autoplay","delay","this","createElement","WebGLRenderingContext","getContext","err","createMultilineText","ctx","textToWrite","maxWidth","text","futureText","wordsInCurrent","wordArrayLength","currentText","replace","subWidth","maxLineWidth","wordArray","split","measureText","console","log","createTextCanvas","el","textContent","styles","getComputedStyle","textArr","fontSize","parseFloat","lineHeight","font","fontFamily","textAlign","textBaseline","fillStyle","fillText","f","createTextBasic","then","direct","aladino","textEl","generateTexture","Promise","resolve","toBlob","blob","newImg","Image","hidden","url","URL","createObjectURL","onload","removeChild","setTimeout","revokeObjectURL","src","gsap","to","ease","args","arguments","apply","e","reject","createInstancingGltf","instancedShelf","instancedTable","gltfLoader","GLTFLoader","dummy","gltf","rotation","shelf","getObjectByName","table","posObj","updateMatrix","setMatrixAt","matrix","_await","WebglMainSlider","container","options","_onVisibilityChange","bind","isAnimating","isWebglInitialized","_init","displacementTexture","textures","images","currentImage","activeIndex","nextImage","nextIndex","disp","dispPower","intensity","textureFactor","classList","setTextureFactor","index","factor","rect","rectRatio","imageRatio","removeEventListener","disconnect","navigateTo","onComplete","_onResize","require","unregister","navigator","serviceWorker","getRegistrations","registrations","registration","result","_module","register","recover","sw","defaultOptions","paused","navigateToNext","navigateToPrev","_onSwipe","slides","total","slidesContainer","navigationContainer","paginationContainer","_getNextIndex","prevSlideButton","nextSlideButton","paginationButtons","_paginationDelegation","_autoplayTimeout","tl","_hammer","Hammer","get","direction","DIRECTION_HORIZONTAL","eventName","once","off","resume","clearTimeout","_getPrevIndex","timeline","defaults","clearProps","autoAlpha","fromTo","nextContent","content","matchMedia","matches","label","cloneSlide","kill","event","deltaX","_generateNavigation","arrowTemplate","className","prevSlideLabel","innerHTML","nextSlideLabel","createDocumentFragment","_generatePagination","ul","li","button","buttonLabel","delegate","parseInt","delegateTarget","dataset","slideIndex"],"mappings":"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","file":"js/legacy/app.1715fad1.js","sourcesContent":["import Stats from 'three/examples/jsm/libs/stats.module';\nimport * as dat from 'three/examples/jsm/libs/dat.gui.module';\n\ntype Experiment = (data: {\n    canvas: HTMLCanvasElement;\n    onRender: () => void;\n    gui: any;\n    sizes: { width: number; height: number };\n}) => void;\n\nexport function baseExperiment(name: string, fn: Experiment) {\n    return () => {\n        const canvas = document.querySelector<HTMLCanvasElement>(`.js-canvas[data-experiment=\"${name}\"]`);\n\n        if (!canvas) {\n            return;\n        }\n\n        let canvasRect = canvas.getBoundingClientRect();\n\n        const sizes = {\n            width: canvasRect.width,\n            height: canvasRect.height,\n        };\n\n        const stats = new Stats();\n        document.body.appendChild(stats.domElement);\n\n        const gui = new dat.GUI();\n        gui.addFolder();\n\n        function onRender() {\n            stats.update();\n        }\n\n        fn({ sizes, gui, canvas, onRender });\n\n        window.addEventListener('resize', () => {\n            canvasRect = canvas.getBoundingClientRect();\n            sizes.width = canvasRect.width;\n            sizes.height = canvasRect.height;\n        });\n\n        function destroy() {\n            gui?.destroy();\n        }\n\n        module.hot?.addDisposeHandler(destroy);\n    };\n}\n","import * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { baseExperiment } from '../base';\n\nexport const createParticlesBasic = baseExperiment('particles-basic', ({ canvas, sizes, onRender, gui }) => {\n    let rAF: number;\n    const renderer = new THREE.WebGLRenderer({ canvas });\n    renderer.outputEncoding = THREE.sRGBEncoding;\n    renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n    renderer.setSize(sizes.width, sizes.height);\n\n    const camera = new THREE.PerspectiveCamera(45, sizes.width / sizes.height, 0.1, 1000);\n    camera.position.z = 3;\n\n    const scene = new THREE.Scene();\n    const textureLoader = new THREE.TextureLoader();\n\n    const particleTexture = textureLoader.load(`${PUBLIC_PATH}img/particles/8.png`);\n\n    const particlesGeometry = new THREE.BufferGeometry();\n    const particlesCount = 20000;\n    const positions = new Float32Array(particlesCount * 3);\n\n    for (let i = 0; i < particlesCount * 3; i++) {\n        positions[i] = (Math.random() - 0.5) * 4;\n    }\n\n    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\n\n    const sphere = new THREE.Points(\n        particlesGeometry,\n        new THREE.PointsMaterial({\n            color: 0xffffff,\n            map: particleTexture,\n            size: 0.05,\n            sizeAttenuation: true,\n            depthWrite: false,\n            blending: THREE.AdditiveBlending,\n        }),\n    );\n    scene.add(sphere);\n\n    const controls = new OrbitControls(camera, canvas);\n    controls.enableDamping = true;\n\n    function render() {\n        onRender();\n        controls.update();\n        renderer.render(scene, camera);\n    }\n\n    function animate() {\n        render();\n        rAF = requestAnimationFrame(animate);\n    }\n\n    function destroy() {\n        cancelAnimationFrame(rAF);\n        renderer.dispose();\n    }\n\n    animate();\n\n    window.addEventListener('resize', () => {\n        camera.aspect = sizes.width / sizes.height;\n        camera.updateProjectionMatrix();\n        renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n        renderer.setSize(sizes.width, sizes.height);\n    });\n\n    module.hot?.addDisposeHandler(destroy);\n});\n","import * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { baseExperiment } from '../../base';\nimport vertexShader from './shaders/vertex.glsl';\nimport fragmentShader from './shaders/fragment.glsl';\nimport { disposeMesh } from '../../../utils';\nimport texture from './russia.png';\n\nexport const createParticlesPathTrailing = baseExperiment(\n    'particles-path-trailing',\n    ({ canvas, sizes, onRender, gui }) => {\n        let rAF: number;\n        const renderer = new THREE.WebGLRenderer({ canvas });\n        renderer.outputEncoding = THREE.sRGBEncoding;\n        renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n        renderer.setSize(sizes.width, sizes.height);\n\n        const camera = new THREE.PerspectiveCamera(45, sizes.width / sizes.height, 0.1, 100);\n        camera.position.z = 10;\n\n        const scene = new THREE.Scene();\n        // const clock = new THREE.Clock();\n\n        const svg = document.querySelector<SVGElement>('svg.js-russia-svg');\n\n        if (!svg) {\n            throw new Error('svg not found');\n        }\n\n        const svgBBox = svg.getBBox();\n        svg.style.display = 'none';\n        const svgTexture = new THREE.TextureLoader().load(texture);\n\n        const params = {\n            mapColor: 0x7071a,\n            // particlesColor: 0x040a14,\n            particlesColor: 0x110800,\n            // pointsAmountFactor: 0.4,\n            pointsAmountFactor: 0.9,\n            // maxPointsToRender: 50,\n            maxPointsToRender: 200,\n            // pointsToRenderFactor: 0.2,\n            pointsToRenderFactor: 0.5,\n            particlesSpeed: 1,\n            // opacityFactor: 0.2,\n            opacityFactor: 0.3,\n            // particleSize: 30,\n            particleSize: 20,\n        };\n        gui?.add(params, 'particlesSpeed').min(0).max(10).step(1);\n        gui?.add(params, 'opacityFactor').min(0).max(1).step(0.001);\n\n        let pathsData: any[] = [];\n        let maxPoints = 0;\n        let positions: Float32Array | null;\n        let opacity: Float32Array | null;\n\n        const particlesGeometry = new THREE.BufferGeometry();\n\n        function initScene() {\n            pathsData = Array.from(svg!.querySelectorAll<SVGPathElement>('.land')).map((path) => {\n                const pathLength = path.getTotalLength();\n                const pointsAmount = Math.floor(pathLength * params.pointsAmountFactor);\n                const points: THREE.Vector3[] = [];\n\n                for (let i = 0; i < pointsAmount; i++) {\n                    const pointAt = (pathLength / pointsAmount) * i;\n                    const point = path.getPointAtLength(pointAt);\n                    const normalizedPoint = {\n                        x: (point.x - svgBBox.width / 2) * 0.01 + Math.random() * 0.02,\n                        y: (point.y - svgBBox.height / 2) * 0.01 + Math.random() * 0.02,\n                        z: 0,\n                    };\n                    points.push(new THREE.Vector3(normalizedPoint.x, normalizedPoint.y, normalizedPoint.z));\n                }\n\n                return {\n                    length: pathLength,\n                    points,\n                    pointsToRender: Math.min(\n                        params.maxPointsToRender,\n                        Math.floor(pointsAmount * params.pointsToRenderFactor),\n                    ),\n                    currentPosition: 0,\n                };\n            });\n            maxPoints = pathsData.reduce((acc, pathData) => acc + pathData.pointsToRender, 0);\n\n            positions = new Float32Array(maxPoints * 3);\n            opacity = new Float32Array(maxPoints);\n\n            for (let i = 0; i < maxPoints * 3; i++) {\n                positions[i] = 0;\n            }\n\n            for (let i = 0; i < maxPoints; i++) {\n                opacity[i] = Math.random() * params.opacityFactor;\n            }\n\n            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\n            particlesGeometry.setAttribute('opacity', new THREE.BufferAttribute(opacity, 1));\n        }\n\n        initScene();\n        gui?.add(params, 'pointsToRenderFactor').min(0).max(1).step(0.01).onFinishChange(initScene);\n        gui?.add(params, 'pointsAmountFactor').min(0).max(3).step(0.01).onFinishChange(initScene);\n        gui?.add(params, 'maxPointsToRender').min(0).max(500).step(1).onFinishChange(initScene);\n\n        const particlesMaterial = new THREE.ShaderMaterial({\n            uniforms: {\n                uParticleSize: { value: params.particleSize * renderer.getPixelRatio() },\n                uTime: { value: 0 },\n                uColor: { value: new THREE.Color(params.particlesColor) },\n            },\n            vertexShader,\n            fragmentShader,\n            transparent: true,\n            depthWrite: false,\n            blending: THREE.AdditiveBlending,\n        });\n        gui?.addColor(params, 'particlesColor').onChange(() => {\n            particlesMaterial.uniforms.uColor.value = new THREE.Color(params.particlesColor);\n        });\n        gui?.add(params, 'particleSize')\n            .min(0)\n            .max(100)\n            .step(0.01)\n            .onChange(() => {\n                particlesMaterial.uniforms.uParticleSize.value = params.particleSize;\n            });\n\n        const particles = new THREE.Points(particlesGeometry, particlesMaterial);\n        particles.position.y = 0.33;\n        scene.add(particles);\n\n        const plane = new THREE.Mesh(\n            new THREE.PlaneBufferGeometry(svgBBox.width * 0.01, svgBBox.height * 0.01, 1, 1),\n            new THREE.MeshBasicMaterial({\n                color: params.mapColor,\n                map: svgTexture,\n            }),\n        );\n        scene.add(plane);\n        gui?.addColor(params, 'mapColor').onChange(() => {\n            plane.material.color = new THREE.Color(params.mapColor);\n        });\n\n        const dummyMat4 = new THREE.Matrix4();\n\n        const controls = new OrbitControls(camera, canvas);\n        controls.enableDamping = true;\n\n        function render() {\n            // const elapsedTime = clock.getElapsedTime();\n\n            onRender();\n            // particlesMaterial.uniforms.uTime.value = elapsedTime;\n            let k = 0;\n\n            for (let i = 0; i < pathsData.length; i++) {\n                pathsData[i].currentPosition =\n                    (pathsData[i].currentPosition + params.particlesSpeed) % pathsData[i].points.length;\n\n                for (let j = 0; j < pathsData[i].pointsToRender; j++) {\n                    const point = pathsData[i].points[(j + pathsData[i].currentPosition) % pathsData[i].points.length];\n                    positions?.set([point.x, point.y, point.z], k * 3);\n\n                    if (opacity) {\n                        opacity[k] = j / (pathsData[i].pointsToRender / params.opacityFactor);\n                    }\n\n                    k++;\n                }\n            }\n\n            particlesGeometry.attributes.position.array = positions;\n            particlesGeometry.applyMatrix4(dummyMat4.makeScale(1, -1, 1));\n            particlesGeometry.attributes.opacity.array = opacity;\n            particlesGeometry.attributes.position.needsUpdate = true;\n            particlesGeometry.attributes.opacity.needsUpdate = true;\n\n            controls.update();\n            renderer.render(scene, camera);\n        }\n\n        function animate() {\n            render();\n            rAF = requestAnimationFrame(animate);\n        }\n\n        function destroy() {\n            if (svg) {\n                svg.style.display = 'block';\n            }\n\n            cancelAnimationFrame(rAF);\n            scene.remove(particles);\n            disposeMesh(particles);\n            renderer.dispose();\n            gui.destroy();\n        }\n\n        animate();\n\n        window.addEventListener('resize', () => {\n            camera.aspect = sizes.width / sizes.height;\n            camera.updateProjectionMatrix();\n            renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n            renderer.setSize(sizes.width, sizes.height);\n        });\n\n        module.hot?.addDisposeHandler(destroy);\n    },\n);\n","export default \"#define GLSLIFY 1\\nuniform float uParticleSize;\\n\\nattribute float opacity;\\n\\nvarying float vOpacity;\\n\\nvoid main() {\\n    vOpacity = opacity;\\n\\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.);\\n\\n    gl_PointSize = uParticleSize * (-1. / mvPosition.z);\\n    gl_Position = projectionMatrix * mvPosition;\\n}\";","export default \"#define GLSLIFY 1\\nuniform vec3 uColor;\\n\\nvarying float vOpacity;\\n\\nvoid main() {\\n    vec2 uv = vec2(gl_PointCoord.x, 1. - gl_PointCoord.y);\\n    vec2 centerUv = uv - 0.5;\\n\\n    vec4 color = vec4(0.08 / length(centerUv));\\n    color.rgb = min(vec3(10.), color.rgb);\\n    color.rgb *= uColor * 100.;\\n    color *= vOpacity;\\n    color.a = min(1., color.a);\\n\\n    gl_FragColor = vec4(color.rgb, 1.);\\n}\";","export default __webpack_public_path__ + \"img/russia.png\";","import * as THREE from 'three';\nimport Stats from 'three/examples/jsm/libs/stats.module';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport * as dat from 'three/examples/jsm/libs/dat.gui.module';\nimport * as CANNON from 'cannon-es';\n\nexport function createPhysicsWorker() {\n    const canvas = document.querySelector<HTMLCanvasElement>('.js-canvas[data-experiment=\"physics-worker\"]');\n    let rAF: number;\n\n    if (!canvas) return;\n\n    let canvasRect = canvas.getBoundingClientRect();\n\n    const sizes = {\n        width: canvasRect.width,\n        height: canvasRect.height,\n    };\n\n    const gui = new dat.GUI();\n    gui.addFolder('');\n\n    const renderer = new THREE.WebGLRenderer({ canvas });\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n    renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n    renderer.setSize(sizes.width, sizes.height);\n\n    const camera = new THREE.PerspectiveCamera(45, sizes.width / sizes.height, 0.1, 1000);\n    camera.position.set(-5, 7, 12);\n    const scene = new THREE.Scene();\n\n    const objects: any[] = [];\n    const world = new CANNON.World();\n    world.gravity.set(0, -9.82, 0);\n\n    const defaultMaterial = new CANNON.Material('default');\n    const defaultContactMaterial = new CANNON.ContactMaterial(defaultMaterial, defaultMaterial, {\n        friction: 0.1,\n        restitution: 0.7,\n    });\n\n    world.addContactMaterial(defaultContactMaterial);\n    world.defaultContactMaterial = defaultContactMaterial;\n\n    const plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(25, 25, 25), new THREE.MeshStandardMaterial());\n    plane.receiveShadow = true;\n    // plane.rotation.x = -Math.PI / 2;\n    scene.add(plane);\n\n    const floorShape = new CANNON.Plane();\n    const floorBody = new CANNON.Body({ material: defaultMaterial });\n    floorBody.mass = 0;\n    floorBody.addShape(floorShape);\n    // floorBody.quaternion.setFromAxisAngle(new CANNON.Vec3(-1, 0, 0), Math.PI * 0.5);\n    world.addBody(floorBody);\n\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.35);\n    scene.add(ambientLight);\n\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);\n    directionalLight.position.set(0.3, 0.5, 0.5);\n    directionalLight.target = plane;\n    directionalLight.castShadow = true;\n    scene.add(directionalLight);\n    gui.add(directionalLight.position, 'x').min(-10).max(10).step(0.001);\n    gui.add(directionalLight.position, 'y').min(-10).max(10).step(0.001);\n    gui.add(directionalLight.position, 'z').min(-10).max(10).step(0.001);\n\n    const boxGeometry = new THREE.BoxBufferGeometry(1, 1, 1);\n    const boxMaterial = new THREE.MeshStandardMaterial({\n        metalness: 0.5,\n        roughness: 0.45,\n    });\n\n    function createBox(size = 1, position: { x: number; y: number; z: number }) {\n        const mesh = new THREE.Mesh(boxGeometry, boxMaterial);\n        mesh.castShadow = true;\n        mesh.scale.set(size, size, size);\n        mesh.position.x = position.x;\n        mesh.position.y = position.y;\n        mesh.position.z = position.z;\n        scene.add(mesh);\n\n        const shape = new CANNON.Box(new CANNON.Vec3(position.x, position.y, position.z));\n        const body = new CANNON.Body({\n            mass: 1,\n            position: new CANNON.Vec3(position.x, position.y, position.z),\n            shape,\n        });\n\n        world.addBody(body);\n        objects.push({ mesh, body });\n        // body.applyLocalForce(new CANNON.Vec3(150, 0, 0), new CANNON.Vec3(0, 0, 0));\n    }\n\n    createBox(1, { x: 0, y: 3, z: 0 });\n\n    const clock = new THREE.Clock();\n    let oldElapsedTime = 0;\n\n    const controls = new OrbitControls(camera, canvas);\n    controls.enableDamping = true;\n\n    const stats = new Stats();\n    document.body.appendChild(stats.domElement);\n\n    function render() {\n        const elapsedTime = clock.getElapsedTime();\n        const deltaTime = elapsedTime - oldElapsedTime;\n        oldElapsedTime = elapsedTime;\n\n        // Update physics world\n        world.step(1 / 60, deltaTime, 3);\n\n        for (let i = 0; i < objects.length; i++) {\n            objects[i].mesh.position.copy(objects[i].body.position);\n        }\n\n        controls.update();\n        stats.update();\n\n        renderer.render(scene, camera);\n    }\n\n    function animate() {\n        render();\n        rAF = requestAnimationFrame(animate);\n    }\n\n    function destroy() {\n        cancelAnimationFrame(rAF);\n        gui.destroy();\n        boxGeometry.dispose();\n        boxMaterial.dispose();\n        renderer.dispose();\n    }\n\n    animate();\n\n    window.addEventListener('resize', () => {\n        canvasRect = canvas.getBoundingClientRect();\n        sizes.width = canvasRect.width;\n        sizes.height = canvasRect.height;\n        camera.aspect = sizes.width / sizes.height;\n        camera.updateProjectionMatrix();\n        renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n        renderer.setSize(sizes.width, sizes.height);\n    });\n\n    module.hot?.addDisposeHandler(destroy);\n}\n","import * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { baseExperiment } from '../../base';\nimport vertexShader from './shaders/vertex.glsl';\nimport fragmentShader from './shaders/fragment.glsl';\nimport { disposeMesh } from '../../../utils';\n\nexport const createShadersPatterns = baseExperiment('shaders-patterns', ({ canvas, sizes, onRender, gui }) => {\n    let rAF: number;\n    const renderer = new THREE.WebGLRenderer({ canvas });\n    renderer.outputEncoding = THREE.sRGBEncoding;\n    renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n    renderer.setSize(sizes.width, sizes.height);\n\n    const camera = new THREE.PerspectiveCamera(45, sizes.width / sizes.height, 0.1, 100);\n    camera.position.z = 10;\n\n    const scene = new THREE.Scene();\n    const clock = new THREE.Clock();\n\n    // const params = {\n    //     mapColor: 0x7071a,\n    //     // particlesColor: 0x040a14,\n    //     particlesColor: 0x110800,\n    //     // pointsAmountFactor: 0.4,\n    //     pointsAmountFactor: 0.9,\n    //     // maxPointsToRender: 50,\n    //     maxPointsToRender: 200,\n    //     // pointsToRenderFactor: 0.2,\n    //     pointsToRenderFactor: 0.5,\n    //     particlesSpeed: 1,\n    //     // opacityFactor: 0.2,\n    //     opacityFactor: 0.3,\n    //     // particleSize: 30,\n    //     particleSize: 20,\n    // };\n\n    const geometry = new THREE.PlaneBufferGeometry(6, 6, 256, 256);\n\n    const material = new THREE.ShaderMaterial({\n        defines: {\n            PI: Math.PI,\n        },\n        uniforms: {\n            uTime: { value: 0 },\n        },\n        vertexShader,\n        fragmentShader,\n        transparent: true,\n    });\n\n    const mesh = new THREE.Mesh(geometry, material);\n    mesh.position.y = 0.33;\n    scene.add(mesh);\n\n    const controls = new OrbitControls(camera, canvas);\n    controls.enableDamping = true;\n\n    function render() {\n        const elapsedTime = clock.getElapsedTime();\n\n        onRender();\n        material.uniforms.uTime.value = elapsedTime;\n\n        controls.update();\n        renderer.render(scene, camera);\n    }\n\n    function animate() {\n        render();\n        rAF = requestAnimationFrame(animate);\n    }\n\n    function destroy() {\n        cancelAnimationFrame(rAF);\n        scene.remove(mesh);\n        disposeMesh(mesh);\n        renderer.dispose();\n        gui.destroy();\n    }\n\n    animate();\n\n    window.addEventListener('resize', () => {\n        camera.aspect = sizes.width / sizes.height;\n        camera.updateProjectionMatrix();\n        renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n        renderer.setSize(sizes.width, sizes.height);\n    });\n\n    module.hot?.addDisposeHandler(destroy);\n});\n","export default \"#define GLSLIFY 1\\n//\\n// GLSL textureless classic 3D noise \\\"cnoise\\\",\\n// with an RSL-style periodic variant \\\"pnoise\\\".\\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\\n// Version: 2011-10-11\\n//\\n// Many thanks to Ian McEwan of Ashima Arts for the\\n// ideas for permutation and gradient selection.\\n//\\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\\n// Distributed under the MIT license. See LICENSE file.\\n// https://github.com/ashima/webgl-noise\\n//\\n\\nvec3 mod289(vec3 x)\\n{\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 mod289(vec4 x)\\n{\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 permute(vec4 x)\\n{\\n  return mod289(((x*34.0)+1.0)*x);\\n}\\n\\nvec4 taylorInvSqrt(vec4 r)\\n{\\n  return 1.79284291400159 - 0.85373472095314 * r;\\n}\\n\\nvec3 fade(vec3 t) {\\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\\n}\\n\\n// Classic Perlin noise\\nfloat cnoise(vec3 P)\\n{\\n  vec3 Pi0 = floor(P); // Integer part for indexing\\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\\n  Pi0 = mod289(Pi0);\\n  Pi1 = mod289(Pi1);\\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\\n  vec4 iz0 = Pi0.zzzz;\\n  vec4 iz1 = Pi1.zzzz;\\n\\n  vec4 ixy = permute(permute(ix) + iy);\\n  vec4 ixy0 = permute(ixy + iz0);\\n  vec4 ixy1 = permute(ixy + iz1);\\n\\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\\n  gx0 = fract(gx0);\\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\\n  vec4 sz0 = step(gz0, vec4(0.0));\\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\\n\\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\\n  gx1 = fract(gx1);\\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\\n  vec4 sz1 = step(gz1, vec4(0.0));\\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\\n\\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\\n\\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\\n  g000 *= norm0.x;\\n  g010 *= norm0.y;\\n  g100 *= norm0.z;\\n  g110 *= norm0.w;\\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\\n  g001 *= norm1.x;\\n  g011 *= norm1.y;\\n  g101 *= norm1.z;\\n  g111 *= norm1.w;\\n\\n  float n000 = dot(g000, Pf0);\\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\\n  float n111 = dot(g111, Pf1);\\n\\n  vec3 fade_xyz = fade(Pf0);\\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\\n  return 2.2 * n_xyz;\\n}\\n\\nuniform float uTime;\\n\\nvarying vec2 vUv;\\nvarying float vElevation;\\n\\nvoid main() {\\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\\n    modelPosition.z += cnoise(modelPosition.xyz * sin(uTime)) * 0.7;\\n    float elevation = modelPosition.z;\\n\\n    vUv = uv;\\n    vElevation = elevation;\\n\\n    gl_Position = projectionMatrix * viewMatrix * modelPosition;\\n}\\n\\n// varying vec2 vUv;\\n\\n// void main() {\\n//     vUv = uv;\\n//     vec4 mvPosition = modelViewMatrix * vec4(position, 1.);\\n//     gl_Position = projectionMatrix * mvPosition;\\n// }\";","export default \"#define GLSLIFY 1\\nuniform float uTime;\\n\\nvarying vec2 vUv;\\nvarying float vElevation;\\n\\nvoid main() {\\n    vec3 color = vec3(distance(vUv, vec2(0.5)));\\n    \\n    gl_FragColor = vec4(mix(vec3(0.2), color, clamp(vElevation, 0., 1.)), 1.0);\\n}\\n\";","import './styles.scss';\nimport Aladino from 'aladino';\nimport { baseExperiment } from '../../base';\nimport vertexShader from './shaders/vertex.glsl';\nimport fragmentShader from './shaders/fragment.glsl';\nimport postprocessingShader from './shaders/postprocessing.glsl';\n\nexport const createShadersPixelated = baseExperiment('shaders-pixelated', ({ canvas, sizes, onRender, gui }) => {\n    let rAF: number;\n    const sliderAladino = new Aladino({\n        density: 1,\n        dpr: Math.min(devicePixelRatio, 2),\n        canvas,\n        post: {\n            fragment: postprocessingShader,\n            uniforms: {\n                pixelSize: 50,\n            },\n        },\n    });\n\n    const material = sliderAladino.material({\n        vertex: vertexShader,\n        fragment: fragmentShader,\n    });\n\n    const img = document.querySelector('img') as HTMLImageElement;\n\n    const carpet = sliderAladino.carpet(img, {\n        material,\n        uniforms: {\n            image: sliderAladino.texture(img.currentSrc),\n        },\n    });\n\n    function render() {\n        if (sliderAladino.post.uniforms.pixelSize > 1) {\n            sliderAladino.post.uniforms.pixelSize -= 0.5;\n        }\n    }\n\n    function animate() {\n        render();\n        rAF = requestAnimationFrame(animate);\n    }\n\n    function destroy() {\n        cancelAnimationFrame(rAF);\n        carpet.destroy();\n        sliderAladino.destroy();\n        gui.destroy();\n    }\n\n    animate();\n\n    window.addEventListener('resize', () => {\n        carpet.resize();\n    });\n\n    module.hot?.addDisposeHandler(destroy);\n});\n","export default \"#define GLSLIFY 1\\nattribute vec2 position;\\nattribute vec2 uv;\\n\\nuniform mat4 projection;\\n\\nvarying vec2 vUv;\\n\\n// float parabola(float x, float k) {\\n//   return pow(4.0 * x * (1.0 - x), k);\\n// }\\n\\nvoid main() {\\n  vUv = uv;\\n\\n  vec4 pos = vec4(position, 0.0, 1.0);\\n//   float spee = speed * 2.0;\\n//   pos.x += parabola(uv.y, 1.0) * spee;\\n//   vec4 pp = projection * vec4(position, 0.0, 1.0);\\n//   float yy = ((pp / pp.w).x + 1.0) / 2.0;\\n//   pos.z = parabola(clamp(yy, 0.0, 1.0), 2.4) * speed2 * 160.0;\\n//   pos.z = clamp(pos.z, -6.0, 6.0);\\n\\n  gl_Position = projection * pos;\\n}\";","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform vec2 size;\\nuniform vec2 sizeImage;\\nuniform sampler2D image;\\n\\nvarying vec2 vUv;\\n\\nvec4 coverTexture(sampler2D tex, vec2 imgSize, vec2 ouv) {\\n  vec2 s = size;\\n  vec2 i = imgSize;\\n  float rs = s.x / s.y;\\n  float ri = i.x / i.y;\\n  vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\\n  vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\\n  vec2 uv = ouv * s / new + offset;\\n\\n  return texture2D(tex, uv);\\n}\\n\\nvoid main() {\\n  gl_FragColor = coverTexture(image, sizeImage, vUv);\\n}\\n\";","export default \"precision highp float;\\n#define GLSLIFY 1\\n    \\n// uniform float time;\\n// uniform float speed;\\n// uniform vec2 viewport;\\n// uniform sampler2D image;\\n\\n// float parabola(float x, float k) {\\n//     return pow(4.0 * x * (1.0 - x), k);\\n// }\\n\\n// float random(vec2 co) {\\n//     return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n// }\\n\\n// void main() {\\n//     vec2 uv = gl_FragCoord.xy / viewport;\\n//     float spe = speed * 300.0;\\n//     float p = parabola(uv.x, 1.4);\\n\\n//     float r = texture2D(image, uv + vec2(0.000 * spe, 0.0) * p).r;\\n//     float g = texture2D(image, uv + vec2(0.01 * spe, 0.0) * p).g;\\n//     float b = texture2D(image, uv + vec2(0.02 * spe, 0.0) * p).b;\\n//     float a = texture2D(image, uv + vec2(0.000 * spe, 0.0) * p).w;\\n\\n//     gl_FragColor = vec4(r, g, b, a);\\n    \\n//     // Film grain effect\\n//     float n = random(uv + mod(time, 3.0));\\n//     gl_FragColor.rgb *= 1.0 - (n * 0.2);\\n// }\\n\\nuniform sampler2D image;\\nuniform vec2 viewport;\\nuniform vec2 resolution;\\nuniform float pixelSize;\\n\\n// varying vec2 vUv;\\n\\n// vec3 bg(vec2 uv) {\\n//    return texture2D(image, uv).rgb;\\n// }\\n\\n// vec3 effect(vec2 uv, vec3 col) {\\n//    float granularity = floor(intensity*20.+10.);\\n\\n//    if (mod(granularity,2.) > 0.) {\\n//        granularity += 1.0;\\n//    };\\n\\n//    if (granularity > 0.0) {\\n//        float dx = granularity / viewport.x;\\n//        float dy = granularity / viewport.y;\\n//        uv = vec2(dx*(floor(uv.x/dx) + 0.5),dy*(floor(uv.y/dy) + 0.5));\\n//        return bg(uv);\\n//    };\\n\\n//    return col;\\n// }\\n\\nvoid main() {\\n    vec2 uv = gl_FragCoord.xy / viewport;\\n    // vec3 tex = bg(uv);\\n    // vec3 col = effect(uv,tex);\\n    // gl_FragColor = vec4( col, 1. );\\n\\n    vec2 dxy = pixelSize / viewport;\\n    vec2 coord = dxy * floor( uv / dxy );\\n    gl_FragColor = texture2D(image, coord);\\n}\\n\";","import './styles.scss';\nimport Flickity from 'flickity';\nimport Aladino from 'aladino';\nimport lerp from 'lerp';\nimport { baseExperiment } from '../../base';\nimport vertexShader from './shaders/vertex.glsl';\nimport fragmentShader from './shaders/fragment.glsl';\nimport postprocessingShader from './shaders/postprocessing.glsl';\n\nexport const createSliders1 = baseExperiment('sliders-1', ({ canvas, sizes, onRender, gui }) => {\n    let rAF: number;\n    const sliderAladino = new Aladino({\n        density: 16,\n        dpr: Math.min(devicePixelRatio, 2),\n        canvas,\n        post: {\n            fragment: postprocessingShader,\n            uniforms: {\n                speed: 0.0,\n            },\n        },\n    });\n\n    const material = sliderAladino.material({\n        vertex: vertexShader,\n        fragment: fragmentShader,\n        uniforms: {\n            speed: 0,\n            speed2: 0,\n        },\n    });\n\n    const cells = [...document.querySelectorAll('.slider-el')];\n    const carpets = [];\n    cells.forEach((cell) => {\n        const carpet = sliderAladino.carpet(cell, {\n            material,\n            uniforms: {\n                image: sliderAladino.texture(cell.currentSrc),\n            },\n        });\n\n        carpets.push(carpet);\n    });\n\n    let oldProgress = 0;\n    let speed = 0;\n    const freeScroll = true;\n\n    const slider = new Flickity(document.querySelector('.carousel')!, {\n        accessibility: true,\n        freeScroll,\n        dragThreshold: freeScroll ? 0 : 30,\n        // dragThreshold: 30,\n        freeScrollFriction: 0.07,\n        prevNextButtons: false,\n        pageDots: false,\n        // wrapAround: true,\n    });\n\n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach((entry) => {\n            const exactCarpet = carpets.find((carpet) => entry.target === carpet.dom);\n            if (exactCarpet) {\n                exactCarpet.active = entry.isIntersecting;\n            }\n        });\n    });\n\n    cells.forEach((cell) => {\n        observer.observe(cell);\n    });\n\n    slider.on('scroll', (progress) => {\n        // The way flickity works doesn't allow an easy use of the position,\n        // So it can be optimised, as here we're recalculating dom boundingbox each time\n        carpets.forEach((carpet) => {\n            carpet.resize();\n        });\n\n        speed = oldProgress - progress;\n        oldProgress = progress;\n    });\n\n    function render() {\n        material.uniforms.speed = lerp(material.uniforms.speed, speed, 0.6);\n        material.uniforms.speed2 = lerp(material.uniforms.speed2, speed, 0.1);\n        sliderAladino.post.uniforms.speed = lerp(sliderAladino.post.uniforms.speed, speed, 0.1);\n    }\n\n    function animate() {\n        render();\n        rAF = requestAnimationFrame(animate);\n    }\n\n    function destroy() {\n        cancelAnimationFrame(rAF);\n        carpets.forEach((carpet) => {\n            carpet.destroy();\n        });\n        carpets = [];\n        sliderAladino.destroy();\n        slider.destroy();\n        gui.destroy();\n    }\n\n    animate();\n\n    window.addEventListener('resize', () => {\n        carpets.forEach((carpet) => {\n            carpet.resize();\n        });\n    });\n\n    module.hot?.addDisposeHandler(destroy);\n});\n","export default \"#define GLSLIFY 1\\nattribute vec2 position;\\nattribute vec2 uv;\\nuniform mat4 projection;\\nuniform float speed;\\nuniform float speed2;\\nvarying vec2 vUv;\\n\\nfloat parabola(float x, float k) {\\n  return pow(4.0 * x * (1.0 - x), k);\\n}\\n\\nvoid main() {\\n  vUv = uv;\\n\\n  vec4 pos = vec4(position, 0.0, 1.0);\\n  float spee = speed * 2.0;\\n  pos.x += parabola(uv.y, 1.0) * spee;\\n  vec4 pp = projection * vec4(position, 0.0, 1.0);\\n  float yy = ((pp / pp.w).x + 1.0) / 2.0;\\n  pos.z = parabola(clamp(yy, 0.0, 1.0), 2.4) * speed2 * 160.0;\\n  pos.z = clamp(pos.z, -6.0, 6.0);\\n\\n  gl_Position = projection * pos;\\n}\";","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform vec2 size;\\nuniform vec2 sizeImage;\\nuniform sampler2D image;\\n\\nvarying vec2 vUv;\\n\\nvec4 coverTexture(sampler2D tex, vec2 imgSize, vec2 ouv) {\\n  vec2 s = size;\\n  vec2 i = imgSize;\\n  float rs = s.x / s.y;\\n  float ri = i.x / i.y;\\n  vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\\n  vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\\n  vec2 uv = ouv * s / new + offset;\\n\\n  return texture2D(tex, uv);\\n}\\n\\nvoid main() {\\n  gl_FragColor = coverTexture(image, sizeImage, vUv);\\n}\\n\";","export default \"precision highp float;\\n#define GLSLIFY 1\\n    \\nuniform float time;\\nuniform float speed;\\nuniform vec2 viewport;\\nuniform sampler2D image;\\n\\nfloat parabola(float x, float k) {\\n    return pow(4.0 * x * (1.0 - x), k);\\n}\\n\\nfloat random(vec2 co) {\\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nvoid main() {\\n    vec2 uv = gl_FragCoord.xy / viewport;\\n    float spe = speed * 300.0;\\n    float p = parabola(uv.x, 1.4);\\n\\n    float r = texture2D(image, uv + vec2(0.000 * spe, 0.0) * p).r;\\n    float g = texture2D(image, uv + vec2(0.01 * spe, 0.0) * p).g;\\n    float b = texture2D(image, uv + vec2(0.02 * spe, 0.0) * p).b;\\n    float a = texture2D(image, uv + vec2(0.000 * spe, 0.0) * p).w;\\n\\n    gl_FragColor = vec4(r, g, b, a);\\n    \\n    // Film grain effect\\n    float n = random(uv + mod(time, 3.0));\\n    gl_FragColor.rgb *= 1.0 - (n * 0.2);\\n}\";","import './styles.scss';\nimport { baseExperiment } from '../../base';\n// import postprocessingShader from './shaders/postprocessing.glsl';\nimport MainSlider from './main-slider';\nimport MainWebglSlider from './main-slider/webgl-slider';\nimport { isWebGLAvailable } from '../../../utils/webgl';\n\nconst _isWebGLAvailable = isWebGLAvailable();\n\nexport const createSlidersFullscreen = baseExperiment('sliders-fullscreen', ({ canvas, sizes, onRender, gui }) => {\n    const mainSliderContainer = document.querySelector('.js-main-slider');\n    let mainSlider: any;\n    if (mainSliderContainer) {\n        const MainSliderConstructor = _isWebGLAvailable ? MainWebglSlider : MainSlider;\n        mainSlider = new MainSliderConstructor(mainSliderContainer, {\n            duration: 2500,\n            autoplay: true,\n            delay: 5000,\n            // paused: true,\n            canvas,\n        });\n    }\n\n    // function render() {\n    //     console.log('render');\n    //     // material.uniforms.speed = lerp(material.uniforms.speed, speed, 0.6);\n    //     // material.uniforms.speed2 = lerp(material.uniforms.speed2, speed, 0.1);\n    //     // sliderAladino.post.uniforms.speed = lerp(sliderAladino.post.uniforms.speed, speed, 0.1);\n    // }\n\n    // function animate() {\n    //     render();\n    //     this.rAF = requestAnimationFrame(animate);\n    // }\n\n    function destroy() {\n        cancelAnimationFrame(this.rAF);\n\n        if (mainSlider) {\n            mainSlider.destroy();\n            mainSlider = null;\n        }\n\n        gui.destroy();\n    }\n\n    // animate();\n\n    module.hot?.addDisposeHandler(destroy);\n});\n","export function isWebGLAvailable() {\n    try {\n        const canvas = document.createElement('canvas');\n        return !!(\n            window.WebGLRenderingContext &&\n            (canvas.getContext('webgl') || canvas.getContext('experimental-webgl'))\n        );\n    } catch (err) {\n        return false;\n    }\n}\n\nexport function isWebGL2Available() {\n    try {\n        const canvas = document.createElement('canvas');\n        return !!(window.WebGL2RenderingContext && canvas.getContext('webgl2'));\n    } catch (e) {\n        return false;\n    }\n}\n","import './styles.scss';\nimport Aladino from 'aladino';\nimport gsap from 'gsap';\nimport { baseExperiment } from '../base';\nimport vertexShader from './shaders/vertex.glsl';\nimport fragmentShader from './shaders/fragment.glsl';\n\nfunction getPowerOfTwo(value: number, pow = 1) {\n    let _pow = pow;\n\n    while (_pow < value) {\n        _pow *= 2;\n    }\n\n    return _pow;\n}\n\nfunction createMultilineText(ctx, textToWrite, maxWidth, text) {\n    textToWrite = textToWrite.replace('\\n', ' ');\n    var currentText = textToWrite;\n    var futureText;\n    var subWidth = 0;\n    var maxLineWidth = 0;\n\n    var wordArray = textToWrite.split(' ');\n    var wordsInCurrent, wordArrayLength;\n    wordsInCurrent = wordArrayLength = wordArray.length;\n\n    // Reduce currentText until it is less than maxWidth or is a single word\n    // futureText var keeps track of text not yet written to a text line\n    while (ctx.measureText(currentText).width > maxWidth && wordsInCurrent > 1) {\n        console.log({ currentText, width: ctx.measureText(currentText).width });\n        wordsInCurrent--;\n        // let linebreak = false;\n\n        currentText = futureText = '';\n        for (let i = 0; i < wordArrayLength; i++) {\n            if (i < wordsInCurrent) {\n                currentText += wordArray[i];\n                if (i + 1 < wordsInCurrent) {\n                    currentText += ' ';\n                }\n            } else {\n                futureText += wordArray[i];\n                if (i + 1 < wordArrayLength) {\n                    futureText += ' ';\n                }\n            }\n        }\n    }\n    text.push(currentText); // Write this line of text to the array\n    maxLineWidth = ctx.measureText(currentText).width;\n\n    // If there is any text left to be written call the function again\n    if (futureText) {\n        subWidth = createMultilineText(ctx, futureText, maxWidth, text);\n        if (subWidth > maxLineWidth) {\n            maxLineWidth = subWidth;\n        }\n    }\n\n    // Return the maximum line width\n    return maxLineWidth;\n}\n\nfunction createTextCanvas(el: HTMLElement) {\n    const text = el.textContent || '';\n    const dpr = Math.min(2, window.devicePixelRatio);\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d')!;\n    const textMeasurement = ctx.measureText(text);\n    const styles = getComputedStyle(el);\n    const textArr: string[] = [];\n    const fontSize = parseFloat(styles.fontSize) * dpr;\n    const width = parseFloat(styles.width);\n    // const width = getPowerOfTwo(textMeasurement.width);\n    const height = parseFloat(styles.height);\n    const lineHeight = parseFloat(styles.lineHeight);\n    // const height = getPowerOfTwo(fontSize * 2);\n    const maxWidth = createMultilineText(ctx, text, width, textArr);\n    console.log({ maxWidth });\n\n    canvas.width = width * dpr;\n    canvas.height = height * dpr;\n\n    ctx.font = `${fontSize}px ${styles.fontFamily}`;\n    ctx.textAlign = 'center';\n    // ctx.textAlign = styles.textAlign;\n    ctx.textBaseline = 'middle';\n    ctx.fillStyle = styles.color;\n\n    // const canvasX = maxWidth;\n    const canvasX = width;\n    // const canvasX = canvas.width;\n    const canvasY = lineHeight * textArr.length;\n    // const textX = canvas.width / 2;\n    // const textX = canvasX / 2;\n    const textX = 0;\n    let textY: number;\n    const offset = (canvasY - lineHeight * (textArr.length + 1)) * 0.5;\n    console.log(textArr);\n\n    // for (let i = 0; i < textArr.length; i++) {\n    //     textY = (i + 1) * lineHeight + offset;\n    //     // textY = canvas.height / 2;\n    //     ctx.fillText(textArr[i], textX, textY);\n    //     // ctx.fillText(textArr[i], textX, textY + fontSize * 0.14);\n    // }\n    ctx.fillText(text, canvas.width / 2, canvas.height / 2 + fontSize * (0.12 / dpr));\n\n    return canvas;\n}\n\nexport const createTextBasic = baseExperiment('text-basic', async ({ canvas, sizes, onRender, gui }) => {\n    let rAF: number;\n\n    const aladino = new Aladino({\n        density: 1,\n        dpr: Math.min(devicePixelRatio, 2),\n        canvas,\n    });\n\n    Array.from(document.querySelectorAll<HTMLElement>('.js-gl-text')).forEach((textEl) => {\n        const styles = getComputedStyle(textEl);\n\n        const material = aladino.material({\n            vertex: vertexShader,\n            fragment: fragmentShader,\n            uniforms: {\n                pixelSize: 1,\n            },\n        });\n\n        textEl.addEventListener('mouseenter', () => {\n            gsap.to(material.uniforms, {\n                duration: 0.6,\n                pixelSize: parseFloat(styles.fontSize) * 0.75,\n                ease: 'steps(10)',\n            });\n        });\n\n        textEl.addEventListener('mouseleave', () => {\n            gsap.to(material.uniforms, {\n                duration: 0.6,\n                pixelSize: 1,\n                ease: 'steps(10)',\n            });\n        });\n\n        function generateTexture() {\n            return new Promise((resolve) => {\n                createTextCanvas(textEl).toBlob((blob) => {\n                    const newImg = new Image();\n                    newImg.hidden = true;\n                    const url = URL.createObjectURL(blob);\n\n                    newImg.onload = () => {\n                        document.body.removeChild(newImg);\n                        resolve(url);\n                        setTimeout(() => {\n                            URL.revokeObjectURL(url);\n                        }, 0);\n                    };\n\n                    newImg.src = url;\n                    document.body.appendChild(newImg);\n                });\n            });\n        }\n\n        let carpet;\n\n        generateTexture().then((url) => {\n            carpet = aladino.carpet(textEl, {\n                material,\n                uniforms: {\n                    image: aladino.texture(url),\n                },\n            });\n        });\n\n        window.addEventListener('resize', () => {\n            generateTexture().then((url) => {\n                if (carpet) {\n                    carpet.uniforms.image = aladino.texture(url);\n                }\n            });\n        });\n    });\n\n    function render() {\n        onRender();\n    }\n\n    function animate() {\n        render();\n        rAF = requestAnimationFrame(animate);\n    }\n\n    function destroy() {\n        cancelAnimationFrame(rAF);\n    }\n\n    animate();\n\n    module.hot?.addDisposeHandler(destroy);\n});\n","export default \"#define GLSLIFY 1\\nattribute vec2 position;\\nattribute vec2 uv;\\nuniform mat4 projection;\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  vUv = uv;\\n\\n  vec4 pos = vec4(position, 0.0, 1.0);\\n\\n  gl_Position = projection * pos;\\n}\\n\";","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\n// uniform vec2 size;\\n// uniform vec2 sizeImage;\\nuniform vec2 viewport;\\nuniform float pixelSize;\\nuniform sampler2D image;\\nuniform float time;\\n\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  vec2 uv = vUv;\\n  // uv.x += sin(uv.y * 40.0 + time * 0.01) * 0.005;\\n\\n  // gl_FragColor = texture2D(image, uv);\\n\\n  vec2 dxy = pixelSize / viewport;\\n  vec2 coord = dxy * floor(uv / dxy);\\n\\n  gl_FragColor = texture2D(image, coord);\\n}\\n\";","import * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport { baseExperiment } from '../base';\n\nexport const createInstancingGltf = baseExperiment('instancing-gltf', ({ canvas, sizes, onRender, gui }) => {\n    let rAF: number;\n    const renderer = new THREE.WebGLRenderer({ canvas });\n    renderer.outputEncoding = THREE.sRGBEncoding;\n    renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n    renderer.setSize(sizes.width, sizes.height);\n\n    const camera = new THREE.PerspectiveCamera(45, sizes.width / sizes.height, 0.1, 1000);\n    camera.position.z = 3;\n\n    const scene = new THREE.Scene();\n    const gltfLoader = new GLTFLoader();\n    const dummy = new THREE.Object3D();\n\n    let instancedShelf: THREE.InstancedMesh | null;\n    const shelfCount = 4;\n\n    let instancedTable: THREE.InstancedMesh | null;\n    const tableCount = 10;\n\n    gltfLoader.load(`${PUBLIC_PATH}gltf/room.glb`, (gltf) => {\n        console.log(gltf.scene);\n        gltf.scene.position.y = -2;\n        gltf.scene.rotation.y = 7.2;\n        const scale = 0.00153;\n        dummy.scale.set(scale, scale, scale);\n\n        const shelf = gltf.scene.getObjectByName('Other_Environment002') as THREE.Mesh;\n        const table = gltf.scene.getObjectByName('Other_Environment003') as THREE.Mesh;\n\n        if (shelf) {\n            instancedShelf = new THREE.InstancedMesh(shelf.geometry, shelf.material, shelfCount);\n\n            instancedShelf.name = 'Instanced Shelf';\n            gltf.scene.add(instancedShelf);\n\n            let i = 0;\n\n            for (let x = 0; x < shelfCount; x++) {\n                const posObj = gltf.scene.getObjectByName(x === 0 ? `Sphere` : `Sphere00${x}`);\n\n                if (posObj) {\n                    dummy.position.copy(posObj.position);\n                    dummy.rotation.set(0, -Math.PI / 2, 0);\n                    dummy.updateMatrix();\n                    instancedShelf.setMatrixAt(i++, dummy.matrix);\n                }\n            }\n        }\n\n        if (table) {\n            instancedTable = new THREE.InstancedMesh(table.geometry, table.material, tableCount);\n            instancedTable.name = 'Instanced Table';\n            gltf.scene.add(instancedTable);\n\n            let i = 0;\n\n            for (let x = 0; x < tableCount; x++) {\n                const posObj = gltf.scene.getObjectByName(`Sphere00${x + 5}`);\n\n                if (posObj) {\n                    dummy.position.copy(posObj.position);\n                    dummy.updateMatrix();\n                    instancedTable.setMatrixAt(i++, dummy.matrix);\n                }\n            }\n        }\n\n        scene.add(gltf.scene);\n    });\n\n    const ambientLight = new THREE.AmbientLight();\n    scene.add(ambientLight);\n\n    const controls = new OrbitControls(camera, canvas);\n    controls.enableDamping = true;\n\n    function render() {\n        onRender();\n        controls.update();\n\n        // const time = Date.now() * 0.001;\n\n        // if (instancedShelf) {\n        //     // let i = 0;\n        //     // const offset = (shelfCount - 1) / 2;\n\n        //     // for (let x = 0; x < shelfCount; x++) {\n        //     //     for (let y = 0; y < shelfCount; y++) {\n        //     //         for (let z = 0; z < shelfCount; z++) {\n        //     //             dummy.position.set(offset - x, offset - y, offset - z);\n        //     //             dummy.rotation.y = Math.sin(x / 4 + time) + Math.sin(y / 4 + time) + Math.sin(z / 4 + time);\n        //     //             dummy.rotation.z = dummy.rotation.y * 2;\n\n        //     //             dummy.updateMatrix();\n        //     //             instancedShelf.setMatrixAt(i++, dummy.matrix);\n        //     //         }\n        //     //     }\n        //     // }\n\n        //     instancedShelf.instanceMatrix.needsUpdate = true;\n        // }\n\n        renderer.render(scene, camera);\n    }\n\n    function animate() {\n        render();\n        rAF = requestAnimationFrame(animate);\n    }\n\n    function destroy() {\n        cancelAnimationFrame(rAF);\n\n        if (instancedShelf) {\n            instancedShelf.dispose();\n            instancedShelf = null;\n        }\n\n        if (instancedTable) {\n            instancedTable.dispose();\n            instancedTable = null;\n        }\n\n        renderer.dispose();\n    }\n\n    animate();\n\n    window.addEventListener('resize', () => {\n        camera.aspect = sizes.width / sizes.height;\n        camera.updateProjectionMatrix();\n        renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));\n        renderer.setSize(sizes.width, sizes.height);\n    });\n\n    module.hot?.addDisposeHandler(destroy);\n});\n","import Aladino from 'aladino';\nimport lerp from 'lerp';\nimport gsap from 'gsap';\nimport vertexShader from './shaders/vertex.glsl';\nimport fragmentShader from './shaders/fragment.glsl';\nimport MainSlider from './index';\nimport type { MainSliderOptions } from './types';\n\nexport default class WebglMainSlider extends MainSlider {\n    isWebglInitialized: boolean;\n\n    // width: number;\n\n    // height: number;\n\n    isAnimating: boolean;\n\n    // containerRect: DOMRect;\n\n    constructor(container: Element, options: Partial<MainSliderOptions>) {\n        super(container, options);\n        this._onVisibilityChange = this._onVisibilityChange.bind(this);\n        // this.animate = this.animate.bind(this);\n\n        this.isAnimating = false;\n        // this.containerRect = this.container.getBoundingClientRect();\n        // this.width = this.containerRect.width;\n        // this.height = this.containerRect.height;\n        this.isWebglInitialized = false;\n\n        this._init();\n    }\n\n    protected _init() {\n        this.aladino = new Aladino({\n            density: 1,\n            dpr: Math.min(devicePixelRatio, 2),\n            canvas: this.options.canvas,\n            // post: {\n            //     fragment: postprocessingShader,\n            //     uniforms: {\n            //         speed: 0.0,\n            //     },\n            // },\n        });\n\n        this.displacementTexture = this.aladino.texture(`${PUBLIC_PATH}img/sliders/displacement-map.png`);\n        this.textures = this.images.map((img) => this.aladino.texture(img.currentSrc));\n\n        this.material = this.aladino.material({\n            vertex: vertexShader,\n            fragment: fragmentShader,\n            uniforms: {\n                currentImage: this.textures[this.activeIndex],\n                nextImage: this.textures[this.nextIndex],\n                disp: this.displacementTexture,\n                dispPower: 0,\n                intensity: 0.5,\n                textureFactor: { x: 1, y: 1 },\n            },\n        });\n\n        this.carpet = this.aladino.carpet(this.images[0], {\n            material: this.material,\n            uniforms: {\n                image: this.textures[this.activeIndex],\n            },\n        });\n\n        const observer = new IntersectionObserver((entries) => {\n            entries.forEach((entry) => {\n                this.carpet.active = entry.isIntersecting;\n            });\n        });\n\n        observer.observe(this.container);\n\n        document.addEventListener('visibilitychange', this._onVisibilityChange);\n\n        // this.animate();\n\n        this.container.classList.add('webgl-initialized');\n        this.isWebglInitialized = true;\n    }\n\n    protected setTextureFactor(index: number) {\n        const { image } = this.textures[index];\n        const factor = { x: 1, y: 1 };\n        const rect = this.container.getBoundingClientRect();\n        const rectRatio = rect.width / rect.height;\n        const imageRatio = image.width / image.height;\n\n        if (rectRatio > imageRatio) {\n            factor.x = 1;\n            factor.y = (1 / rectRatio) * imageRatio;\n        } else {\n            factor.x = (1 * rectRatio) / imageRatio;\n            factor.y = 1;\n        }\n\n        return factor;\n    }\n\n    // render() {\n    //     // material.uniforms.speed = lerp(material.uniforms.speed, speed, 0.6);\n    //     // material.uniforms.speed2 = lerp(material.uniforms.speed2, speed, 0.1);\n    //     // sliderAladino.post.uniforms.speed = lerp(sliderAladino.post.uniforms.speed, speed, 0.1);\n    // }\n\n    // animate() {\n    //     this.render();\n    //     this.rAF = requestAnimationFrame(this.animate);\n    // }\n\n    async destroy() {\n        super.destroy();\n\n        cancelAnimationFrame(this.rAF);\n        document.removeEventListener('visibilitychange', this._onVisibilityChange);\n\n        if (this.observer) {\n            this.observer.disconnect();\n            this.observer = null;\n        }\n\n        this.carpet.destroy();\n        this.aladino.destroy();\n        this.container.classList.remove('webgl-initialized');\n        this.isWebglInitialized = false;\n    }\n\n    async navigateTo(index: number) {\n        super.navigateTo(index);\n\n        if (!this.isAnimating) return;\n\n        this.isAnimating = true;\n        console.log(this);\n\n        if (this.nextIndex !== index) {\n            this.material.uniforms.nextImage = this.textures[index];\n        }\n\n        const factor = this.setTextureFactor(index);\n\n        gsap.to(this.material.uniforms.dispPower, {\n            duration: this.duration / 1000,\n            value: 1,\n            ease: 'expo.inOut',\n            onComplete: () => {\n                this.material.uniforms.dispPower = 0;\n                this.material.uniforms.currentImage = this.textures[index];\n                this.material.uniforms.nextImage = this.textures[this.nextIndex];\n                this.isAnimating = false;\n                // this.activeIndex = index;\n            },\n        });\n\n        gsap.to(this.material.uniforms.textureFactor, {\n            duration: this.duration / 1000,\n            x: factor.x,\n            y: factor.y,\n            ease: 'expo.inOut',\n        });\n    }\n\n    protected async _onResize() {\n        super._onResize();\n        this.carpet.resize();\n    }\n\n    protected async _onVisibilityChange() {\n        // if (this.offscreen) {\n        //     await this.offscreen.setState({ documentVisible: document.visibilityState === 'visible' });\n        // }\n    }\n}\n","export default \"#define GLSLIFY 1\\nattribute vec2 position;\\nattribute vec2 uv;\\n\\nuniform mat4 projection;\\n\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  vUv = uv;\\n\\n  gl_Position = projection * vec4(position, 0.0, 1.0);\\n}\\n\";","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform vec2 size;\\nuniform vec2 sizeImage;\\nuniform sampler2D image;\\nuniform sampler2D currentImage;\\nuniform sampler2D nextImage;\\nuniform sampler2D disp;\\nuniform float dispPower;\\nuniform float intensity;\\n\\nvarying vec2 vUv;\\n\\nvec4 coverTexture(sampler2D tex, vec2 imgSize, vec2 ouv) {\\n  vec2 s = size;\\n  vec2 i = imgSize;\\n  float rs = s.x / s.y;\\n  float ri = i.x / i.y;\\n  vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\\n  vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\\n  vec2 uv = ouv * s / new + offset;\\n\\n  return texture2D(tex, uv);\\n}\\n\\nvoid main() {\\n    vec2 uv = vUv;\\n    vec4 disp = texture2D(disp, uv);\\n    vec2 dispVec = vec2(disp.x, disp.y);\\n    \\n    vec2 distPos1 = uv + (dispVec * intensity * dispPower);\\n    vec2 distPos2 = uv + (dispVec * -(intensity * (1. - dispPower)));\\n    \\n    vec4 currentImage = texture2D(currentImage, distPos1);\\n    vec4 nextImage = texture2D(nextImage, distPos2);\\n    \\n    gl_FragColor = mix(currentImage, nextImage, dispPower);\\n//   gl_FragColor = coverTexture(currentImage, sizeImage, vUv);\\n}\\n\";","/* global BUILD_TYPE */\n/* eslint global-require: \"off\" */\nimport 'focus-visible';\n// import 'intersection-observer';\n\nif (BUILD_TYPE === 'legacy') {\n    require('core-js/es/symbol');\n    require('core-js/es/promise/finally');\n    require('document-register-element/build/document-register-element');\n    // require('element-matches-polyfill');\n    require('whatwg-fetch');\n}\n","/* global PUBLIC_PATH */\nasync function register() {\n    if ('serviceWorker' in navigator) {\n        try {\n            await navigator.serviceWorker.register(`${PUBLIC_PATH}service-worker.js`);\n        } catch (err) {\n            console.log('SW registration failed: ', err);\n        }\n    }\n}\n\nasync function unregister() {\n    if ('serviceWorker' in navigator) {\n        const registrations = await navigator.serviceWorker.getRegistrations();\n        registrations.forEach((registration) => {\n            registration.unregister();\n        });\n    }\n}\n\nconst _module = { register, unregister };\n\nexport default _module;\n","/* global USE_SERVICE_WORKER */\nimport './webpack-imports';\nimport './sentry';\nimport './polyfills';\nimport sw from './sw';\nimport { registerCustomElements } from './custom-elements';\n\nimport { createParticlesBasic } from './experiments/particles/particles-basic';\nimport { createParticlesPathTrailing } from './experiments/particles/path-trailing';\n\nimport { createPhysicsWorker } from './experiments/physics/physics-worker';\n\nimport { createShadersPatterns } from './experiments/shaders/patterns';\nimport { createShadersPixelated } from './experiments/shaders/pixelated';\n\nimport { createSliders1 } from './experiments/sliders/1';\nimport { createSlidersFullscreen } from './experiments/sliders/fullscreen';\n\nimport { createTextBasic } from './experiments/text/text-basic';\n\nimport { createInstancingGltf } from './experiments/instancing/gltf';\n\nimport './experiments/distortions/1';\n\nregisterCustomElements();\n\ncreateParticlesBasic();\ncreateParticlesPathTrailing();\n\ncreatePhysicsWorker();\n\ncreateShadersPatterns();\ncreateShadersPixelated();\ncreateSliders1();\ncreateSlidersFullscreen();\n\ncreateTextBasic();\n\ncreateInstancingGltf();\n\n// Service Worker\nif (USE_SERVICE_WORKER) {\n    window.addEventListener('load', () => sw.register());\n} else {\n    sw.unregister();\n}\n\n// module.hot?.accept();\n","import { BackSide, FrontSide, Group, Material, Mesh, Points } from 'three';\n\nexport function disposeMesh(mesh: Mesh | Points) {\n    mesh.geometry?.dispose();\n    if (mesh.material) {\n        if (mesh.material instanceof Array) {\n            for (let i = 0; i < mesh.material.length; ++i) {\n                mesh.material[i].dispose();\n            }\n        } else {\n            mesh.material.dispose();\n        }\n    }\n}\n\nexport function separateCullingPass(mesh: Mesh): Group {\n    const group = new Group();\n\n    [BackSide, FrontSide].forEach((side, i) => {\n        const newMesh = mesh.clone();\n        newMesh.name = `${newMesh.name}__clone${i + 1}`;\n\n        if (mesh.material instanceof Material) {\n            const material = mesh.material.clone();\n            newMesh.material = material;\n            material.transparent = true;\n            material.side = side;\n        }\n\n        group.add(newMesh);\n\n        if (mesh.parent) {\n            mesh.parent.add(group);\n            mesh.parent.remove(mesh);\n            disposeMesh(mesh);\n        }\n    });\n\n    return group;\n}\n","/* eslint-disable max-lines */\nimport delegate from 'delegate';\n// import createDispatcher from 'lit-dispatcher';\nimport gsap from 'gsap';\n// import debounce from 'lodash.debounce';\nimport Hammer from 'hammerjs';\n\nimport type { MainSliderOptions } from './types';\n\nconst defaultOptions: MainSliderOptions = {\n    duration: 1,\n    autoplay: false,\n    delay: 5000,\n    paused: false,\n};\n\nexport default class MainSlider {\n    container: Element;\n\n    options: MainSliderOptions;\n\n    slides: Element[];\n\n    slidesContainer: Element | null;\n\n    navigationContainer: Element | null;\n\n    paginationContainer: Element | null;\n\n    prevSlideButton: HTMLButtonElement | null;\n\n    nextSlideButton: HTMLButtonElement | null;\n\n    _paginationDelegation: any;\n\n    // _dispatcher: ReturnType<typeof createDispatcher>;\n\n    paginationButtons: HTMLButtonElement[];\n\n    images: HTMLImageElement[];\n\n    total: number;\n\n    activeIndex: number;\n\n    nextIndex: number;\n\n    isAnimating: boolean;\n\n    _autoplayTimeout: NodeJS.Timeout | null;\n\n    // _contentMap: WeakMap<Element, { content: Element; label: Element; name: Element; link: Element }>;\n\n    _hammer: HammerManager;\n\n    tl: gsap.core.Timeline | null;\n\n    constructor(container: Element, options: Partial<MainSliderOptions> = defaultOptions) {\n        this.navigateToNext = this.navigateToNext.bind(this);\n        this.navigateToPrev = this.navigateToPrev.bind(this);\n        this._onResize = this._onResize.bind(this);\n        this._onSwipe = this._onSwipe.bind(this);\n\n        this.options = { ...defaultOptions, ...options };\n        // this._dispatcher = createDispatcher();\n        this.isAnimating = false;\n        this.container = container;\n        this.slides = Array.from(container.querySelectorAll('.js-main-slide'));\n        this.total = this.slides.length;\n        this.slidesContainer = container.querySelector('.js-main-slides-container');\n        this.navigationContainer = container.querySelector('.js-main-slide-nav-container');\n        this.paginationContainer = container.querySelector('.js-main-slide-pagination-container');\n        this.images = Array.from(container.querySelectorAll('img.js-main-slide-img'));\n        this.activeIndex = 0;\n        this.nextIndex = this._getNextIndex();\n        this.prevSlideButton = null;\n        this.nextSlideButton = null;\n        this.paginationButtons = [];\n        this._paginationDelegation = null;\n        this._autoplayTimeout = null;\n        this.tl = null;\n\n        // this._contentMap = new WeakMap<Element, { content: Element; label: Element; name: Element; link: Element }>();\n        // this.slides.forEach((slide) => {\n        //     this._contentMap.set(slide, {\n        //         content: slide.querySelector('.js-main-slide-content')!,\n        //         label: slide.querySelector('.js-main-slide-label')!,\n        //         name: slide.querySelector('.js-main-slide-name')!,\n        //         link: slide.querySelector('.js-main-slide-link')!,\n        //     });\n        // });\n\n        // this._generateNavigation();\n        // this._generatePagination();\n\n        this._hammer = new Hammer(container as HTMLElement);\n        this._hammer.get('swipe').set({ direction: Hammer.DIRECTION_HORIZONTAL });\n        this._hammer.on('swipe', this._onSwipe);\n\n        this.slides[this.activeIndex].classList.add('is-active');\n        this.slides[this.nextIndex].classList.add('is-next');\n        // this.paginationButtons[this.activeIndex].classList.add('a-loader');\n\n        if (this.options.autoplay && !this.options.paused) {\n            this._autoplayTimeout = setTimeout(this.navigateToNext, this.options.delay);\n        }\n\n        window.addEventListener('resize', this._onResize);\n    }\n\n    on(eventName: string, fn: (data?: any) => void) {\n        // this._dispatcher.on(eventName, fn);\n    }\n\n    once(eventName: string, fn: (data?: any) => void) {\n        // this._dispatcher.once(eventName, fn);\n    }\n\n    off(eventName: string, fn: (data?: any) => void) {\n        // this._dispatcher.off(eventName, fn);\n    }\n\n    resume() {\n        this.options.paused = true;\n        this._autoplayTimeout = setTimeout(this.navigateToNext, this.options.delay);\n    }\n\n    navigateTo(index: number) {\n        console.log('adf');\n        if (this.activeIndex === index || this.isAnimating) return;\n\n        if (this._autoplayTimeout) {\n            clearTimeout(this._autoplayTimeout);\n        }\n\n        this.isAnimating = true;\n        // this._dispatcher.dispatch('change', { currentIndex: this.activeIndex, nextIndex: index });\n\n        // const activePaginationBtn = this.paginationButtons.find(\n        //     (btn) => this.paginationButtons.indexOf(btn) === this.activeIndex,\n        // );\n\n        // if (activePaginationBtn) {\n        //     activePaginationBtn.classList.remove('a-loader');\n        //     activePaginationBtn.classList.remove('is-active');\n        // }\n\n        // this.paginationButtons.find((btn) => this.paginationButtons.indexOf(btn) === index)?.classList.add('is-active');\n\n        const nextIndex = this._getNextIndex(this._getPrevIndex(index));\n        const nextAfterNextIndex = this._getNextIndex(nextIndex);\n\n        if (this.nextIndex !== nextIndex) {\n            this.slides[this.nextIndex].classList.remove('is-next');\n            this.slides[nextIndex].classList.add('is-next');\n            this.nextIndex = nextIndex;\n        }\n\n        // const currentContent = this._contentMap.get(this.slides[this.activeIndex]);\n        // const nextContent = this._contentMap.get(this.slides[index]);\n        // const nextAfterNextContent = this._contentMap.get(this.slides[nextAfterNextIndex]);\n        const duration = (this.options.duration / 1000) * 0.9;\n\n        // const cloneSlide = this.slides[nextAfterNextIndex].cloneNode(true) as Element;\n        // cloneSlide.classList.add('main-slide--clone');\n        // cloneSlide.classList.remove('is-active');\n        // cloneSlide.classList.remove('is-next');\n        // this.slidesContainer?.appendChild(cloneSlide);\n\n        this.tl = gsap.timeline({\n            defaults: { duration },\n            onComplete: () => {\n                // this.slidesContainer?.removeChild(cloneSlide);\n\n                // this.paginationButtons\n                //     .find((btn) => this.paginationButtons.indexOf(btn) === index)\n                //     ?.classList.add('a-loader');\n\n                this.slides[this.activeIndex].classList.remove('is-active');\n                this.slides[this.nextIndex].classList.remove('is-next');\n\n                this.activeIndex = index;\n                this.nextIndex = this._getNextIndex();\n\n                this.slides[this.activeIndex].classList.add('is-active');\n                this.slides[this.nextIndex].classList.add('is-next');\n\n                gsap.set(\n                    [\n                        this.slides[index],\n                        // currentContent!.link,\n                        // currentContent!.name,\n                        // currentContent!.label,\n                        // nextContent!.content,\n                        // nextContent!.name,\n                        // nextContent!.label,\n                        // nextContent!.link,\n                        // nextAfterNextContent!.name,\n                    ],\n                    { clearProps: 'all' },\n                );\n\n                this.isAnimating = false;\n                // this._dispatcher.dispatch('change-complete', {\n                //     currentIndex: this.activeIndex,\n                //     nextIndex: this.nextIndex,\n                // });\n\n                if (this.options.autoplay) {\n                    this._autoplayTimeout = setTimeout(this.navigateToNext, this.options.delay);\n                }\n            },\n        });\n\n        this.tl\n            .to(this.images[this.activeIndex], {\n                autoAlpha: 0,\n                ease: 'power4.inOut',\n            })\n            .fromTo(\n                this.images[nextIndex],\n                {\n                    autoAlpha: 0,\n                },\n                {\n                    x: 0,\n                    autoAlpha: 1,\n                    ease: 'expo.inOut',\n                },\n                `-=${duration}`,\n            )\n            .fromTo(\n                // this.slides[index],\n                nextContent!.content,\n                {\n                    x: 0,\n                },\n                {\n                    x: window.matchMedia('(max-width: 1024px)').matches ? '-100vw' : '-50vw',\n                    ease: 'power4.inOut',\n                },\n                `-=${duration - 0.05}`,\n            )\n            .to(\n                nextContent!.name,\n                {\n                    opacity: 1,\n                    ease: 'expo.inOut',\n                },\n                `-=${duration}`,\n            )\n            .fromTo(\n                nextContent!.label,\n                {\n                    x: '15vw',\n                    autoAlpha: 0,\n                },\n                {\n                    x: 0,\n                    autoAlpha: 1,\n                    ease: 'expo.inOut',\n                },\n                `-=${duration - 0.05}`,\n            )\n            .fromTo(\n                cloneSlide,\n                {\n                    x: '50vw',\n                },\n                {\n                    x: 0,\n                    ease: 'power4.inOut',\n                },\n                `-=${duration - 0.05}`,\n            );\n    }\n\n    navigateToPrev() {\n        this.navigateTo(this._getPrevIndex());\n    }\n\n    navigateToNext() {\n        this.navigateTo(this._getNextIndex());\n    }\n\n    destroy() {\n        if (this.tl) {\n            this.tl.kill();\n            this.tl = null;\n        }\n        this._hammer.destroy();\n        window.removeEventListener('resize', this._onResize);\n        this.prevSlideButton?.removeEventListener('click', this.navigateToPrev);\n        this.nextSlideButton?.removeEventListener('click', this.navigateToNext);\n        // this.slides.forEach((slide) => {\n        //     this._contentMap.delete(slide);\n        // });\n\n        if (this._paginationDelegation) {\n            this._paginationDelegation.destroy();\n        }\n\n        if (this._autoplayTimeout) {\n            clearTimeout(this._autoplayTimeout);\n        }\n    }\n\n    protected _onResize() {\n        //\n    }\n\n    protected _onSwipe(event: any) {\n        console.log('swipe');\n        if (event.deltaX < 0) {\n            this.navigateToNext();\n        } else {\n            this.navigateToPrev();\n        }\n    }\n\n    protected _generateNavigation() {\n        if (!this.navigationContainer) return;\n\n        const arrowTemplate = `\n            <svg width=\"16\" height=\"9\" viewBox=\"0 0 16 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15.2 1.348a.59.59 0 00-.834-.832L8.08 6.802 2.014.516a.59.59 0 00-.833.832l6.9 7.01 7.118-7.01z\" fill=\"#fff\"/>\n            </svg>\n        `;\n        this.prevSlideButton = document.createElement('button');\n        this.prevSlideButton.className = 'main-slider-navigation-arrow main-slider-navigation-arrow--prev';\n        const prevSlideLabel = 'Предыдущий слайд';\n        this.prevSlideButton.setAttribute('aria-label', prevSlideLabel);\n        this.prevSlideButton.setAttribute('title', prevSlideLabel);\n        this.prevSlideButton.innerHTML = arrowTemplate;\n        this.prevSlideButton.addEventListener('click', this.navigateToPrev);\n\n        this.nextSlideButton = document.createElement('button');\n        this.nextSlideButton.className = 'main-slider-navigation-arrow main-slider-navigation-arrow--next';\n        const nextSlideLabel = 'Следующий слайд';\n        this.nextSlideButton.setAttribute('aria-label', nextSlideLabel);\n        this.nextSlideButton.setAttribute('title', nextSlideLabel);\n        this.nextSlideButton.innerHTML = arrowTemplate;\n        this.nextSlideButton.addEventListener('click', this.navigateToNext);\n\n        const fragment = document.createDocumentFragment();\n        fragment.appendChild(this.prevSlideButton);\n        fragment.appendChild(this.nextSlideButton);\n\n        this.navigationContainer.appendChild(fragment);\n    }\n\n    protected _generatePagination() {\n        if (!this.paginationContainer) return;\n\n        const loaderTemplate = `\n            <svg viewBox=\"0 0 37 37\" class=\"main-slider-pagination__loading-svg\" preserveAspectRatio=\"none\">\n                <circle class=\"main-slider-pagination__loading-path\" cx=\"19\" cy=\"19\" r=\"18.5\" style=\"--path-length:115.49px;\"></circle>\n            </svg>\n        `;\n\n        this.paginationButtons = [];\n        const ul = document.createElement('ul');\n        ul.className = 'list-unstyled main-slider-pagination-list';\n\n        for (let i = 0; i < this.total; i++) {\n            const li = document.createElement('li');\n            li.className = 'main-slider-pagination-list__item';\n            ul.appendChild(li);\n            const button = document.createElement('button');\n            button.className = 'main-slider-pagination-btn js-main-slider-pagination-btn';\n            const buttonLabel = `Перейти на слайд ${i + 1}`;\n            button.setAttribute('aria-label', buttonLabel);\n            button.setAttribute('title', buttonLabel);\n            button.setAttribute('data-slide-index', `${i}`);\n            if (this.activeIndex === i) {\n                button.classList.add('is-active');\n            }\n            this.paginationButtons.push(button);\n            li.appendChild(button);\n            button.innerHTML += loaderTemplate;\n        }\n\n        this.paginationContainer.appendChild(ul);\n\n        this._paginationDelegation = delegate(\n            this.paginationContainer,\n            '.js-main-slider-pagination-btn',\n            'click',\n            (event: any) => {\n                this.navigateTo(parseInt(event.delegateTarget.dataset.slideIndex, 10));\n            },\n        );\n    }\n\n    protected _getPrevIndex(index = this.activeIndex) {\n        return (index - 1 + this.total) % this.total;\n    }\n\n    protected _getNextIndex(index = this.activeIndex) {\n        return (index + 1) % this.total;\n    }\n}\n"],"sourceRoot":""}