"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[251],{3251:function(e,t,n){n.d(t,{y8:function(){return f},xC:function(){return d},cy:function(){return m},k:function(){return p}});var r=n(2248),o=n(7294),a=n(9477),l=n(9698);let u;function s(){if(void 0!==u)return u;try{var e;let t;const n=document.createElement("canvas");return u=!(!window.WebGL2RenderingContext||!(t=n.getContext("webgl2"))),t&&(null===(e=t.getExtension("WEBGL_lose_context"))||void 0===e||e.loseContext()),u}catch(t){return u=!1}}const c=function(e,t){return void 0===t&&(t=r.YQ.NORMAL),(0,o.forwardRef)((function(n,r){let{blendFunction:a,opacity:u,...s}=n;const c=(0,l.x)((e=>e.invalidate)),i=(0,o.useMemo)((()=>new e(s)),[s]);return(0,o.useLayoutEffect)((()=>{i.blendMode.blendFunction=a||t,void 0!==u&&(i.blendMode.opacity.value=u),c()}),[a,i.blendMode,u]),o.createElement("primitive",{ref:r,object:i,dispose:null})}))},i=(c(r.rk,r.YQ.SCREEN),c(r.at),c(r.zo),c(r.AL),(0,o.createContext)(null)),d=o.memo((0,o.forwardRef)(((e,t)=>{let{children:n,camera:u,scene:c,resolutionScale:d,enabled:f=!0,renderPriority:m=1,autoClear:p=!0,depthBuffer:w,disableNormalPass:b,stencilBuffer:v,multisampling:x=8,frameBufferType:E=a.HalfFloatType}=e;const{gl:y,scene:g,camera:C,size:h}=(0,l.x)();c=c||g,u=u||C;const[L,M,R]=(0,o.useMemo)((()=>{const e=s(),t=new r.xC(y,{depthBuffer:w,stencilBuffer:v,multisampling:x>0&&e?x:0,frameBufferType:E});t.addPass(new r.CD(c,u));let n=null,o=null;return b||(o=new r.gh(c,u),o.enabled=!1,t.addPass(o),void 0!==d&&e&&(n=new r.xs({normalBuffer:o.texture,resolutionScale:d}),n.enabled=!1,t.addPass(n))),[t,o,n]}),[u,y,w,v,x,E,c,b,d]);(0,o.useEffect)((()=>null==L?void 0:L.setSize(h.width,h.height)),[L,h]),(0,l.y)(((e,t)=>{f&&(y.autoClear=p,L.render(t))}),f?m:0);const _=(0,o.useRef)(null);(0,o.useLayoutEffect)((()=>{let e;return _.current&&_.current.__r3f&&L&&(e=new r.H5(u,..._.current.__r3f.objects),e.renderToScreen=!0,L.addPass(e),M&&(M.enabled=!0),R&&(R.enabled=!0)),()=>{e&&(null==L||L.removePass(e)),M&&(M.enabled=!1),R&&(R.enabled=!1)}}),[L,n,u,M,R]);const P=(0,o.useMemo)((()=>({composer:L,normalPass:M,downSamplingPass:R,resolutionScale:d,camera:u,scene:c})),[L,M,R,d,u,c]);return(0,o.useImperativeHandle)(t,(()=>L),[L]),o.createElement(i.Provider,{value:P},o.createElement("group",{ref:_},n))}))),f=(0,o.forwardRef)((function(e,t){let{target:n,depthTexture:u,...s}=e;const c=(0,l.x)((e=>e.invalidate)),{camera:d}=(0,o.useContext)(i),f=(0,o.useMemo)((()=>new r.Jy(d,s)),[d,s]);return(0,o.useLayoutEffect)((()=>{if(n){const e=n instanceof a.Vector3?(new a.Vector3).set(n.x,n.y,n.z):(new a.Vector3).set(n[0],n[1],n[2]);f.target=e}u&&f.setDepthTexture(u.texture,u.packing),c()}),[n,u,f]),o.createElement("primitive",{ref:t,object:f,dispose:null})})),m=(c(r.ol),c(r.JL),c(r.xV,r.YQ.COLOR_DODGE));c(r.p$,r.YQ.OVERLAY),c(r.wL);const p=(0,o.forwardRef)((function(e,t){let{preset:n=r.F9.HIGH,edgeDetectionMode:a=r.HN.COLOR}=e;const u=(0,l.A)(r.hB,""),s=(0,o.useMemo)((()=>new r.fY(...u,n,a)),[u,n,a]);return o.createElement("primitive",{ref:t,object:s,dispose:null})}));c(r.M4),c(r.Dd),c(r.Uy)}}]);