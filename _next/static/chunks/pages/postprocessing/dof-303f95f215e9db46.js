(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[884],{3251:function(e,t,n){"use strict";n.d(t,{y8:function(){return f},xC:function(){return m},cy:function(){return d},k:function(){return h}});var r=n(5845),a=n(7294),o=n(9477),s=n(4232);let i;function c(){if(void 0!==i)return i;try{var e;let t;const n=document.createElement("canvas");return i=!(!window.WebGL2RenderingContext||!(t=n.getContext("webgl2"))),t&&(null===(e=t.getExtension("WEBGL_lose_context"))||void 0===e||e.loseContext()),i}catch(t){return i=!1}}const l=function(e,t){return void 0===t&&(t=r.YQ.NORMAL),(0,a.forwardRef)((function(n,r){let{blendFunction:o,opacity:i,...c}=n;const l=(0,s.Ky)((e=>e.invalidate)),u=(0,a.useMemo)((()=>new e(c)),[c]);return(0,a.useLayoutEffect)((()=>{u.blendMode.blendFunction=o||t,void 0!==i&&(u.blendMode.opacity.value=i),l()}),[o,u.blendMode,i]),a.createElement("primitive",{ref:r,object:u,dispose:null})}))},u=(l(r.rk,r.YQ.SCREEN),l(r.at),l(r.zo),l(r.AL),(0,a.createContext)(null)),m=a.memo((0,a.forwardRef)(((e,t)=>{let{children:n,camera:i,scene:l,enabled:m=!0,renderPriority:f=1,autoClear:d=!0,depthBuffer:h,disableNormalPass:p,stencilBuffer:y,multisampling:g=8,frameBufferType:v=o.HalfFloatType}=e;const{gl:x,scene:w,camera:b,size:j}=(0,s.Ky)();l=l||w,i=i||b;const[M,S]=(0,a.useMemo)((()=>{const e=new r.xC(x,{depthBuffer:h,stencilBuffer:y,multisampling:g>0&&c()?g:0,frameBufferType:v});e.addPass(new r.CD(l,i));const t=p?null:new r.gh(l,i);return t&&(t.enabled=!1),t&&e.addPass(t),[e,t]}),[i,x,h,y,g,v,l,p]);(0,a.useLayoutEffect)((()=>null==M?void 0:M.setSize(j.width,j.height)),[M,j]),(0,s.xQ)(((e,t)=>{m&&(x.autoClear=d,M.render(t))}),m?f:0);const O=(0,a.useRef)(null);(0,a.useLayoutEffect)((()=>{let e;return O.current&&O.current.__r3f&&M&&(e=new r.H5(i,...O.current.__r3f.objects),M.addPass(e),e.renderToScreen=!0,S&&(S.enabled=!0)),()=>{e&&(null==M||M.removePass(e)),S&&(S.enabled=!1)}}),[M,n,i]);const _=(0,a.useMemo)((()=>({composer:M,normalPass:S,camera:i,scene:l})),[M,S,i,l]);return(0,a.useImperativeHandle)(t,(()=>M),[M]),a.createElement(u.Provider,{value:_},a.createElement("group",{ref:O},n))}))),f=(0,a.forwardRef)((function(e,t){let{target:n,depthTexture:i,...c}=e;const l=(0,s.Ky)((e=>e.invalidate)),{camera:m}=(0,a.useContext)(u),f=(0,a.useMemo)((()=>new r.Jy(m,c)),[m,c]);return(0,a.useLayoutEffect)((()=>{if(n){const e=n instanceof o.Vector3?(new o.Vector3).set(n.x,n.y,n.z):(new o.Vector3).set(n[0],n[1],n[2]);f.target=e}i&&f.setDepthTexture(i.texture,i.packing),l()}),[n,i,f]),a.createElement("primitive",{ref:t,object:f,dispose:null})})),d=(l(r.ol),l(r.JL),l(r.xV,r.YQ.COLOR_DODGE));l(r.p$,r.YQ.OVERLAY),l(r.wL);const h=(0,a.forwardRef)((function(e,t){let{preset:n=r.F9.HIGH,edgeDetectionMode:o=r.HN.COLOR}=e;const i=(0,s.U2)(r.hB,""),c=(0,a.useMemo)((()=>new r.fY(...i,n,o)),[i,n,o]);return a.createElement("primitive",{ref:t,object:c,dispose:null})}));l(r.M4),l(r.Dd),l(r.Uy)},5272:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/postprocessing/dof",function(){return n(709)}])},8159:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5893),a=n(8626);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function i(e){var t=e.color,n=s(e,["color"]),i=(0,a.L)("/gltf/shoe.gltf"),c=i.nodes,l=i.materials;return(0,r.jsxs)("group",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},n,{dispose:null,children:[(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:c.shoe.geometry,material:l.laces,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:c.shoe_1.geometry,children:(0,r.jsx)("meshStandardMaterial",{color:t,aoMap:l.mesh.aoMap,normalMap:l.mesh.normalMap,roughnessMap:l.mesh.roughnessMap,metalnessMap:l.mesh.metalnessMap,envMapIntensity:.8})}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:c.shoe_2.geometry,material:l.caps,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:c.shoe_3.geometry,material:l.inner,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:c.shoe_4.geometry,material:l.sole,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:c.shoe_5.geometry,material:l.stripes,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:c.shoe_6.geometry,material:l.band,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:c.shoe_7.geometry,material:l.patch,"material-envMapIntensity":.8})]}))}a.L.preload("/gltf/shoe.gltf")},4797:function(e,t,n){"use strict";var r=n(5893),a=n(9008);t.Z=function(e){var t=e.children,n=e.documentTitle;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.default,{children:[(0,r.jsxs)("title",{children:[n?"".concat(n," - "):"","WebGL Sandbox"]}),(0,r.jsx)("meta",{name:"description",content:"WebGL sandbox"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("main",{className:"main",children:(0,r.jsx)("div",{className:"canvas",suppressHydrationWarning:!0,children:t})})]})}},709:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(5893),a=n(7294),o=n(4232),s=n(6188),i=n(9888),c=n(3251),l=n(8690),u=n(4797),m=n(8159);function f(){var e=(0,l.M4)({focalLength:{value:.1,min:0,max:1,step:1e-4},focusDistance:{value:0,min:0,max:1,step:1e-4},bokehScale:{value:1,min:0,max:5,step:.001},noiseOpacity:{value:.25,min:0,max:1,step:1e-4}}),t=e.bokehScale,n=e.focalLength,o=e.focusDistance,u=e.noiseOpacity;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Suspense,{fallback:null,children:(0,r.jsxs)(s.H,{environment:"city",intensity:.5,children:[(0,r.jsx)(m.Z,{color:"tomato",position:[0,0,0]}),(0,r.jsx)(m.Z,{color:"orange",scale:-1,rotation:[0,.5,Math.PI],position:[0,0,-2]})]})}),(0,r.jsxs)(c.xC,{multisampling:4,disableNormalPass:!0,children:[(0,r.jsx)(c.y8,{focusDistance:o,focalLength:n,bokehScale:t,height:480}),(0,r.jsx)(c.cy,{opacity:u})]}),(0,r.jsx)(i.z,{})]})}function d(){return(0,r.jsx)(u.Z,{documentTitle:"Depth of field",children:(0,r.jsx)(o.Xz,{dpr:[1,2],camera:{position:[0,0,150],fov:45},gl:{powerPreference:"high-performance",alpha:!1,antialias:!1,stencil:!1,depth:!1},children:(0,r.jsx)(f,{})})})}}},function(e){e.O(0,[737,429,652,690,385,774,888,179],(function(){return t=5272,e(e.s=t);var t}));var t=e.O();_N_E=t}]);