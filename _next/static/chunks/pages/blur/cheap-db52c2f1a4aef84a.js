(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{5875:function(n,a,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blur/cheap",function(){return e(7387)}])},4797:function(n,a,e){"use strict";var r=e(5893),i=e(9008),l=e.n(i);a.Z=function(n){var a=n.children,e=n.documentTitle;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsxs)("title",{children:[e?"".concat(e," - "):"","WebGL Sandbox"]}),(0,r.jsx)("meta",{name:"description",content:"WebGL sandbox"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("main",{className:"main",children:(0,r.jsx)("div",{className:"canvas",suppressHydrationWarning:!0,children:a})})]})}},7387:function(n,a,e){"use strict";e.r(a),e.d(a,{default:function(){return p}});var r=e(1799),i=e(5893),l=e(7294),o=e(9259),t=e(6135),u=e(9137),s=e(5769),m=e(4351),c=e(4797),v=(0,u.g)({u_map:null,blur:0,gamma:.5},"\n    varying vec2 vUv;\n    void main()\t{\n      vUv = uv;\n      \n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n    }\n  ","\n    uniform sampler2D u_map;\n    uniform float blur;\n    uniform float gamma;\n    varying vec2 vUv;\n  \n    float weight(float t, float log2radius, float gamma)\n    {\n        return exp(-gamma * pow(log2radius-t,2.));\n    }\n  \n    vec4 sample_blured(sampler2D u_map, vec2 uv, float radius, float gamma)\n    {\n        vec4 pix = vec4(0.);\n        float norm = 0.;\n  \n        float log2radius = log2(radius);\n  \n        //weighted integration over mipmap levels\n        for(float i = 0.; i < 10.; i += 0.5)\n        {\n            float k = weight(i, log2radius, gamma);\n            pix += k * texture(u_map, uv, i); \n            norm += k;\n        }\n  \n        //nomalize, and a bit of brigtness hacking \n        return pix*pow(norm,-0.95);\n    }\n  \n    void main() {\n      vec3 color = sample_blured(u_map, vUv, blur, gamma).rgb;\n      gl_FragColor = vec4(color, 1.);\n    }\n  ");function d(){var n=(0,s.m)("/interior.jpeg"),a=(0,m.M4)({blur:{value:1,min:.01,max:100},gamma:{value:.5,min:.01,max:1}});return(0,i.jsxs)("mesh",{children:[(0,i.jsx)("planeGeometry",{args:[6,8]}),(0,i.jsx)("myMaterial",(0,r.Z)({u_map:n},a))]})}function p(){return(0,i.jsx)(c.Z,{documentTitle:"Blur",children:(0,i.jsx)(t.Xz,{dpr:[1,2],gl:{alpha:!1,powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1},children:(0,i.jsx)(l.Suspense,{fallback:null,children:(0,i.jsx)(d,{})})})})}(0,o.e)({MyMaterial:v})}},function(n){n.O(0,[737,309,575,774,888,179],(function(){return a=5875,n(n.s=a);var a}));var a=n.O();_N_E=a}]);