(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[806],{4192:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configurators/props",function(){return n(327)}])},4797:function(e,t,n){"use strict";var r=n(5893),a=n(9008),o=n.n(a);t.Z=function(e){var t=e.children,n=e.documentTitle;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsxs)("title",{children:[n?"".concat(n," - "):"","WebGL Sandbox"]}),(0,r.jsx)("meta",{name:"description",content:"WebGL sandbox"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,r.jsx)("meta",{name:"application-name",content:"WebGL Sandbox"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-title",content:"WebGL Sandbox"}),(0,r.jsx)("meta",{name:"description",content:"WebGL demos and showcases powered by React-three-fiber."}),(0,r.jsx)("meta",{name:"format-detection",content:"telephone=no"}),(0,r.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,r.jsx)("meta",{name:"msapplication-config",content:"/icons/browserconfig.xml"}),(0,r.jsx)("meta",{name:"msapplication-TileColor",content:"#020507"}),(0,r.jsx)("meta",{name:"msapplication-tap-highlight",content:"no"}),(0,r.jsx)("meta",{name:"theme-color",content:"#020507"}),(0,r.jsx)("link",{rel:"apple-touch-icon",href:"/icons/touch-icon-iphone.png"}),(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"152x152",href:"/icons/touch-icon-ipad.png"}),(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/icons/touch-icon-iphone-retina.png"}),(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"167x167",href:"/icons/touch-icon-ipad-retina.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/icons/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/icons/favicon-16x16.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,r.jsx)("link",{rel:"mask-icon",href:"/icons/safari-pinned-tab.svg",color:"#5bbad5"}),(0,r.jsx)("link",{rel:"shortcut icon",href:"/favicon.ico"}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,r.jsx)("meta",{name:"twitter:url",content:"https://pavel-mazhuga.github.io"}),(0,r.jsx)("meta",{name:"twitter:title",content:"WebGL Sandbox"}),(0,r.jsx)("meta",{name:"twitter:description",content:"WebGL demos and showcases powered by React-three-fiber."}),(0,r.jsx)("meta",{name:"twitter:image",content:"https://pavel-mazhuga.github.io/icons/android-chrome-192x192.png"}),(0,r.jsx)("meta",{name:"twitter:creator",content:"@DavidWShadow"}),(0,r.jsx)("meta",{property:"og:type",content:"website"}),(0,r.jsx)("meta",{property:"og:title",content:"WebGL Sandbox"}),(0,r.jsx)("meta",{property:"og:description",content:"Best WebGL Sandbox in the world"}),(0,r.jsx)("meta",{property:"og:site_name",content:"WebGL Sandbox"}),(0,r.jsx)("meta",{property:"og:url",content:"https://pavel-mazhuga.github.io"}),(0,r.jsx)("meta",{property:"og:image",content:"https://pavel-mazhuga.github.io/icons/apple-touch-icon.png"})]}),t]})}},327:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r=n(5893),a=n(7294),o=n(7462),i=n(9477),s=n(9259);class c extends i.DataTextureLoader{constructor(e){super(e),this.type=i.HalfFloatType}parse(e){const t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;let r=e.pos,a=-1,o=0,i="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(a=s.indexOf("\n"))&&o<t&&r<e.byteLength;)i+=s,o+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<a&&(!1!==n&&(e.pos+=o+a+1),i+s.slice(0,a))},r=function(e,t,n,r){const a=e[t+3],o=Math.pow(2,a-128)/255;n[r+0]=e[t+0]*o,n[r+1]=e[t+1]*o,n[r+2]=e[t+2]*o,n[r+3]=1},a=function(e,t,n,r){const a=e[t+3],o=Math.pow(2,a-128)/255;n[r+0]=i.DataUtils.toHalfFloat(Math.min(e[t+0]*o,65504)),n[r+1]=i.DataUtils.toHalfFloat(Math.min(e[t+1]*o,65504)),n[r+2]=i.DataUtils.toHalfFloat(Math.min(e[t+2]*o,65504)),n[r+3]=i.DataUtils.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const s=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,i=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let c,l;if(e.pos>=e.byteLength||!(c=n(e)))return t(1,"no header found");if(!(l=c.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(s.valid|=1,s.programtype=l[1],s.string+=c+"\n";c=n(e),!1!==c;)if(s.string+=c+"\n","#"!==c.charAt(0)){if((l=c.match(r))&&(s.gamma=parseFloat(l[1])),(l=c.match(a))&&(s.exposure=parseFloat(l[1])),(l=c.match(o))&&(s.valid|=2,s.format=l[1]),(l=c.match(i))&&(s.valid|=4,s.height=parseInt(l[1],10),s.width=parseInt(l[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=c+"\n";return 2&s.valid?4&s.valid?s:t(3,"missing image size specifier"):t(3,"missing format specifier")}(o);if(-1!==s){const e=s.width,n=s.height,c=function(e,n,r){const a=n;if(a<8||a>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(a!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");const o=new Uint8Array(4*n*r);if(!o.length)return t(4,"unable to allocate buffer space");let i=0,s=0;const c=4*a,l=new Uint8Array(4),u=new Uint8Array(c);let m=r;for(;m>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(l[0]=e[s++],l[1]=e[s++],l[2]=e[s++],l[3]=e[s++],2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=a)return t(3,"bad rgbe scanline format");let n,r=0;for(;r<c&&s<e.byteLength;){n=e[s++];const a=n>128;if(a&&(n-=128),0===n||r+n>c)return t(3,"bad scanline data");if(a){const t=e[s++];for(let e=0;e<n;e++)u[r++]=t}else u.set(e.subarray(s,s+n),r),r+=n,s+=n}const d=a;for(let e=0;e<d;e++){let t=0;o[i]=u[e+t],t+=a,o[i+1]=u[e+t],t+=a,o[i+2]=u[e+t],t+=a,o[i+3]=u[e+t],i+=4}m--}return o}(o.subarray(o.pos),e,n);if(-1!==c){let t,o,l,u;switch(this.type){case i.FloatType:u=c.length/4;const e=new Float32Array(4*u);for(let t=0;t<u;t++)r(c,4*t,e,4*t);t=e,l=i.FloatType;break;case i.HalfFloatType:u=c.length/4;const n=new Uint16Array(4*u);for(let t=0;t<u;t++)a(c,4*t,n,4*t);t=n,l=i.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:n,data:t,header:s.string,gamma:s.gamma,exposure:s.exposure,format:o,type:l}}}return null}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){switch(e.type){case i.FloatType:case i.HalfFloatType:e.encoding=i.LinearEncoding,e.minFilter=i.LinearFilter,e.magFilter=i.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,r)}}const l={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"};function u(e){const t=e+"BufferGeometry";return a.forwardRef((({args:e,children:n,...r},i)=>a.createElement("mesh",(0,o.Z)({ref:i},r),a.createElement(t,{attach:"geometry",args:e}),n)))}u("box"),u("circle"),u("cone"),u("cylinder"),u("sphere"),u("plane"),u("tube"),u("torus"),u("torusKnot"),u("tetrahedron"),u("ring"),u("polyhedron");const m=u("icosahedron"),d=(u("octahedron"),u("dodecahedron"),u("extrude"),u("lathe"),u("capsule"),e=>{return(t=e).current&&t.current.isScene?e.current:e;var t});function p({scene:e,background:t=!1,map:n}){const r=(0,s.w)((e=>e.scene));return a.useLayoutEffect((()=>{if(n){const a=d(e||r),o=a.background,i=a.environment;return"only"!==t&&(a.environment=n),t&&(a.background=n),()=>{"only"!==t&&(a.environment=i),t&&(a.background=o)}}}),[r,e,n,t]),null}function f({files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:n,encoding:r,extensions:a}){if(n){if(!(n in l))throw new Error("Preset must be one of: "+Object.keys(l).join(", "));e=l[n],t="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/"}const o=Array.isArray(e),u=o?i.CubeTextureLoader:c,m=(0,s.z)(u,o?[e]:e,(e=>{e.setPath(t),a&&a(e)})),d=o?m[0]:m;return d.mapping=o?i.CubeReflectionMapping:i.EquirectangularReflectionMapping,d.encoding=(null!==r&&void 0!==r?r:o)?i.sRGBEncoding:i.LinearEncoding,d}function h({background:e=!1,scene:t,...n}){const r=f(n),o=(0,s.w)((e=>e.scene));return a.useLayoutEffect((()=>{const n=d(t||o),a=n.background,i=n.environment;return"only"!==e&&(n.environment=r),e&&(n.background=r),()=>{"only"!==e&&(n.environment=i),e&&(n.background=a)}}),[r,e,t,o]),null}function v({children:e,near:t=1,far:n=1e3,resolution:r=256,frames:o=1,map:c,background:l=!1,scene:u,files:m,path:f,preset:v,extensions:g}){const x=(0,s.w)((e=>e.gl)),y=(0,s.w)((e=>e.scene)),b=a.useRef(null),[w]=a.useState((()=>new i.Scene)),E=a.useMemo((()=>{const e=new i.WebGLCubeRenderTarget(r);return e.texture.type=i.HalfFloatType,e}),[r]);a.useLayoutEffect((()=>{1===o&&b.current.update(x,w);const e=d(u||y),t=e.background,n=e.environment;return"only"!==l&&(e.environment=E.texture),l&&(e.background=E.texture),()=>{"only"!==l&&(e.environment=n),l&&(e.background=t)}}),[e,w,E.texture,u,y,l,o,x]);let M=1;return(0,s.x)((()=>{(o===1/0||M<o)&&(b.current.update(x,w),M++)})),a.createElement(a.Fragment,null,(0,s.g)(a.createElement(a.Fragment,null,e,a.createElement("cubeCamera",{ref:b,args:[t,n,E]}),m||v?a.createElement(h,{background:!0,files:m,preset:v,path:f,extensions:g}):c?a.createElement(p,{background:!0,map:c,extensions:g}):null),w))}function g(e){var t,n,r,s;const c=f(e),l=e.map||c,u=(d=l)&&d.isCubeTexture;var d;const h=a.useMemo((()=>{var e,t;const n=(null!==(e=u?null==(t=l.image[0])?void 0:t.width:l.image.width)&&void 0!==e?e:1024)/4,r=Math.floor(Math.log2(n)),a=Math.pow(2,r),o=3*Math.max(a,112);return[u?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH "+1/o,"#define CUBEUV_TEXEL_HEIGHT "+1/(4*a),`#define CUBEUV_MAX_MIP ${r}.0`,""]}),[]),v=a.useMemo((()=>h.join("\n")+"#define GLSLIFY 1\n#define ENVMAP_TYPE_CUBE_UV\nvarying vec3 vWorldPosition;uniform float radius;uniform float height;\n#ifdef ENVMAP_TYPE_CUBE\nuniform samplerCube cubemap;\n#else\nuniform sampler2D cubemap;\n#endif\nfloat diskIntersectWithBackFaceCulling(in vec3 ro,in vec3 rd,vec3 c,vec3 n,float r){float d=dot(rd,n);if(d>0.0)return 1e6;vec3 o=ro-c;float t=-dot(n,o)/d;vec3 q=o+rd*t;return(dot(q,q)<r*r)? t : 1e6;}float sphereIntersect(in vec3 ro,in vec3 rd,in vec3 ce,float ra){vec3 oc=ro-ce;float b=dot(oc,rd);float c=dot(oc,oc)-ra*ra;float h=b*b-c;if(h<0.0)-1.0;h=sqrt(h);return-b+h;}vec3 project(){vec3 p=normalize(vWorldPosition);vec3 camPos=cameraPosition;camPos.y-=height;float intersection=sphereIntersect(camPos,p,vec3(0.),radius);if(intersection>0.){vec3 h=vec3(0.0,-height,0.0);float intersection2=diskIntersectWithBackFaceCulling(camPos,p,h,vec3(0.0,1.0,0.0),radius);p=(camPos+min(intersection,intersection2)*p)/radius;}else{p=vec3(0.0,1.0,0.0);}return p;}\n#include <common>\n#include <cube_uv_reflection_fragment>\nvoid main(){vec3 projectedWorldPosition=project();\n#ifdef ENVMAP_TYPE_CUBE\nvec3 outcolor=textureCube(cubemap,projectedWorldPosition).rgb;\n#else\nvec3 direction=normalize(projectedWorldPosition);vec2 uv=equirectUv(direction);vec3 outcolor=texture2D(cubemap,uv).rgb;\n#endif\ngl_FragColor=vec4(outcolor,1.0);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}"),[h]),g=a.useMemo((()=>({cubemap:{value:null},height:{value:15},radius:{value:60}})),[]),x=a.useRef(null),y=null==(t=e.ground)?void 0:t.height,b=null==(n=e.ground)?void 0:n.radius,w=null!==(r=null==(s=e.ground)?void 0:s.scale)&&void 0!==r?r:1e3;return a.useEffect((()=>{y&&(x.current.uniforms.height.value=y)}),[y]),a.useEffect((()=>{b&&(x.current.uniforms.radius.value=b)}),[b]),a.useEffect((()=>{x.current.uniforms.cubemap.value=l}),[l]),a.createElement(a.Fragment,null,a.createElement(p,(0,o.Z)({},e,{map:l})),a.createElement(m,{scale:w,args:[1,16]},a.createElement("shaderMaterial",{ref:x,side:i.BackSide,vertexShader:"#define GLSLIFY 1\nvarying vec3 vWorldPosition;void main(){vec4 worldPosition=modelMatrix*vec4(position,1.0);vWorldPosition=worldPosition.xyz;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",fragmentShader:v,uniforms:g})))}function x(e){return e.ground?a.createElement(g,e):e.map?a.createElement(p,e):e.children?a.createElement(v,e):a.createElement(h,e)}const y={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},b={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},w=a.forwardRef((({scale:e=10,frames:t=1/0,opacity:n=1,width:r=1,height:c=1,blur:l=1,far:u=10,resolution:m=512,smooth:d=!0,color:p="#000000",depthWrite:f=!1,renderOrder:h,...v},g)=>{const x=(0,s.w)((e=>e.scene)),w=(0,s.w)((e=>e.gl)),E=a.useRef(null);r*=Array.isArray(e)?e[0]:e||1,c*=Array.isArray(e)?e[1]:e||1;const[M,U,_,j,k,S,D]=a.useMemo((()=>{const e=new i.WebGLRenderTarget(m,m),t=new i.WebGLRenderTarget(m,m);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;const n=new i.PlaneBufferGeometry(r,c).rotateX(Math.PI/2),a=new i.Mesh(n),o=new i.MeshDepthMaterial;o.depthTest=o.depthWrite=!1,o.onBeforeCompile=e=>{e.uniforms={...e.uniforms,ucolor:{value:new i.Color(p).convertSRGBToLinear()}},e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor, ( 1.0 - fragCoordZ ) * 1.0 );")};const s=new i.ShaderMaterial(y),l=new i.ShaderMaterial(b);return l.depthTest=s.depthTest=!1,[e,n,o,a,s,l,t]}),[m,r,c,e,p]),L=e=>{j.visible=!0,j.material=k,k.uniforms.tDiffuse.value=M.texture,k.uniforms.h.value=1*e/256,w.setRenderTarget(D),w.render(j,E.current),j.material=S,S.uniforms.tDiffuse.value=D.texture,S.uniforms.v.value=1*e/256,w.setRenderTarget(M),w.render(j,E.current),j.visible=!1};let T=0;return(0,s.x)((()=>{if(E.current&&(t===1/0||T<t)){const e=x.background;x.background=null;const t=x.overrideMaterial;x.overrideMaterial=_,w.setRenderTarget(M),w.render(x,E.current),x.overrideMaterial=t,L(l),d&&L(.4*l),w.setRenderTarget(null),x.background=e,T++}})),a.createElement("group",(0,o.Z)({"rotation-x":Math.PI/2},v,{ref:g}),a.createElement("mesh",{renderOrder:h,geometry:U,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},a.createElement("meshBasicMaterial",{map:M.texture,"map-encoding":w.outputEncoding,transparent:!0,opacity:n,depthWrite:f})),a.createElement("orthographicCamera",{ref:E,args:[-r/2,r/2,c/2,-c/2,0,u]}))})),E={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function M({children:e,controls:t,shadows:n=!0,adjustCamera:r=!0,environment:c="city",intensity:l=1,preset:u="rembrandt",shadowBias:m=0,contactShadow:d={blur:2,opacity:.5,position:[0,0,0]},...p}){const f=E[u],h=(0,s.w)((e=>e.camera)),v=(0,s.w)((e=>e.controls)),g=a.useRef(null),y=a.useRef(null),[{radius:b,width:M,height:U},_]=a.useState({radius:0,width:0,height:0});return a.useLayoutEffect((()=>{g.current.position.set(0,0,0),g.current.updateWorldMatrix(!0,!0);const e=(new i.Box3).setFromObject(y.current),t=new i.Vector3,n=new i.Sphere,r=e.max.y-e.min.y,a=e.max.x-e.min.x;e.getCenter(t),e.getBoundingSphere(n),_({radius:n.radius,width:a,height:r}),g.current.position.set(-t.x,-t.y+r/2,-t.z)}),[e]),a.useLayoutEffect((()=>{if(r){const e=b/(U>M?1.5:2.5);h.position.set(0,.5*b,2.5*b),h.near=.1,h.far=Math.max(5e3,4*b),h.lookAt(0,e,0);const n=v||(null==t?void 0:t.current);n&&(n.target.set(0,e,0),n.update())}}),[v,b,U,M,r]),a.createElement("group",p,a.createElement("group",{ref:g},a.createElement("group",{ref:y},e)),d&&a.createElement(w,(0,o.Z)({scale:2*b,far:b/2},d)),c&&a.createElement(x,{preset:c}),a.createElement("ambientLight",{intensity:l/3}),a.createElement("spotLight",{penumbra:1,position:[f.main[0]*b,f.main[1]*b,f.main[2]*b],intensity:2*l,castShadow:n,"shadow-bias":m}),a.createElement("pointLight",{position:[f.fill[0]*b,f.fill[1]*b,f.fill[2]*b],intensity:l}))}function U(){const e=(0,s.w)((e=>e.gl));return(0,a.useEffect)((()=>(e.shadowMap.autoUpdate=!1,e.shadowMap.needsUpdate=!0,()=>{e.shadowMap.autoUpdate=e.shadowMap.needsUpdate=!0})),[e.shadowMap]),null}var _=n(4797),j=n(1799),k=n(9396),S=n(9534),D=n(8626);function L(e){var t=e.color,n=(0,S.Z)(e,["color"]),a=(0,D.L)("/gltf/shoe.gltf"),o=a.nodes,i=a.materials;return(0,r.jsxs)("group",(0,k.Z)((0,j.Z)({},n),{dispose:null,children:[(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.shoe.geometry,material:i.laces,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.shoe_1.geometry,children:(0,r.jsx)("meshStandardMaterial",{color:t,aoMap:i.mesh.aoMap,normalMap:i.mesh.normalMap,roughnessMap:i.mesh.roughnessMap,metalnessMap:i.mesh.metalnessMap,envMapIntensity:.8})}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.shoe_2.geometry,material:i.caps,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.shoe_3.geometry,material:i.inner,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.shoe_4.geometry,material:i.sole,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.shoe_5.geometry,material:i.stripes,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.shoe_6.geometry,material:i.band,"material-envMapIntensity":.8}),(0,r.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.shoe_7.geometry,material:i.patch,"material-envMapIntensity":.8})]}))}D.L.preload("/gltf/shoe.gltf");var T=n(4480),P=n(482);function R(){var e=(0,T.Zl)(P.R);return(0,a.useEffect)((function(){return e({shadows:!0}),function(){e({})}}),[e]),(0,r.jsx)(_.Z,{documentTitle:"Configurator"})}R.R3F=function(){return(0,r.jsxs)(a.Suspense,{fallback:null,children:[(0,r.jsxs)(M,{environment:"city",intensity:.5,contactShadow:{opacity:.7,blur:2},children:[(0,r.jsx)(L,{color:"tomato",position:[0,0,0]}),(0,r.jsx)(L,{color:"orange",scale:-1,rotation:[0,.5,Math.PI],position:[0,0,-2]})]}),(0,r.jsx)(U,{})]})};var F=R}},function(e){e.O(0,[817,774,888,179],(function(){return t=4192,e(e.s=t);var t}));var t=e.O();_N_E=t}]);